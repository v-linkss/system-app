import{A as T}from"./AppBar-caeecede.js";import{u as c}from"./vee-validate.esm-472c5a5d.js";import{_ as I,o as f,f as L,c as o,w as r,i as h,a2 as _,a1 as E,j as g,l as p,k as R,d as V,n as q,F as S,e as m,q as N,s as y,h as C}from"./index-bf573807.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import{V as b}from"./VRow-835fc559.js";import{V as u}from"./VAutocomplete-22e1fd5b.js";import{V as P}from"./VDialog-7687c8ff.js";import{V as w,c as D,d as $}from"./VCard-8ca74176.js";import{V as B}from"./VSpacer-441d260f.js";import{V as O}from"./VContainer-bdb2f7f7.js";import"./layout-c76e1f01.js";const H=i=>(N("data-v-2908b2fd"),i=i(),y(),i),J=H(()=>C("h1",{class:"ml-5 mt-5 mb-5",style:{color:"#777777"}},"Receita dos Lotes",-1)),j={data(){return{userData:{},pi_lotes_receitas:{data:void 0,lote_id:void 0,conta_id:void 0,valor:void 0,predio_equipamento_id:void 0,cobrar:void 0,observacao:void 0},lotes:[],contas:[],equipamentos:[],showError:!1,cobranca:[{id:!0,descricao:"COBRAR"},{id:!1,descricao:"DEVOLVER"}]}},methods:{returnToTableLotes(){this.$router.push("/pi-lotes-receitas/index/")},async loadEquipamentos(){const l={predio_token:JSON.parse(localStorage.getItem("predio")).predio_token};try{const s={Authorization:`Bearer ${this.userData.token}`},n=(await m.post("http://45.55.192.246:3333/service/gerencia/loteEquipamentos",l,{headers:s})).data[0].func_json_equipamentos_combolist;this.equipamentos=n}catch(s){console.error("Erro ao carregar tipos:",s)}},async loadContas(){const l={predio_token:JSON.parse(localStorage.getItem("predio")).predio_token};try{const s={Authorization:`Bearer ${this.userData.token}`},n=(await m.post("http://45.55.192.246:3333/service/gerencia/contasPredios",l,{headers:s})).data[0].func_json_contas_predio;this.contas=n,console.log(this.contas)}catch(s){console.error("Erro ao carregar áreas:",s)}},async loadLotes(){const l={predio_token:JSON.parse(localStorage.getItem("predio")).predio_token};try{const s={Authorization:`Bearer ${this.userData.token}`},n=(await m.post("http://45.55.192.246:3333/service/gerencia/lotesPredios",l,{headers:s})).data[0].func_json_lotes_predio;this.lotes=n}catch(s){console.error("Erro ao carregar áreas:",s)}},async submit(){this.pi_lotes_receitas.conta_id===void 0&&(this.pi_lotes_receitas.conta_id=null),this.pi_lotes_receitas.lote_id===void 0&&(this.pi_lotes_receitas.lote_id=null),this.pi_lotes_receitas.predio_equipamento_id===void 0&&(this.pi_lotes_receitas.predio_equipamento_id=null),this.pi_lotes_receitas.cobrar===void 0&&(this.pi_lotes_receitas.cobrar=null);const i=JSON.parse(localStorage.getItem("predio")),l=JSON.parse(localStorage.getItem("user")),s={cobrar:this.pi_lotes_receitas.cobrar,conta_id:this.pi_lotes_receitas.conta_id,predio_equipamento_id:this.pi_lotes_receitas.predio_equipamento_id,data:this.pi_lotes_receitas.data,valor:this.pi_lotes_receitas.valor,observacao:this.pi_lotes_receitas.observacao,lote_id:this.pi_lotes_receitas.lote_id,predio_id:i.predio_id,user_created:l.id};try{const d={Authorization:`Bearer ${this.userData.token}`},n=await m.post("http://45.55.192.246:3333/service/gerencia/createReceitaLotes",s,{headers:d});return this.$router.push("/pi-lotes-receitas/index/"),n}catch(d){console.error("Erro na criação do registro:",d),this.showError=!0}},async checkUndefinedValues(){this.pi_lotes_receitas.predio_equipamento_id===void 0&&(this.pi_lotes_receitas.predio_equipamento_id=null)}},mounted(){this.userData=JSON.parse(localStorage.getItem("user")),this.loadContas(),this.loadEquipamentos(),this.loadLotes()}},F=Object.assign(j,{__name:"RegisterLotes",setup(i){const l=c("data"),s=c("predio_equipamento_id"),d=c("cobrar"),n=c("lote_id"),v=c("observacao"),A=c("valor"),k=c("conta_id");return(e,a)=>{const U=I("mask");return f(),L(S,null,[o(T),o(O,null,{default:r(()=>[J,o(h,{style:{width:"300px"},class:"ml-5 mr-5",modelValue:e.pi_lotes_receitas.data,"onUpdate:modelValue":a[0]||(a[0]=t=>e.pi_lotes_receitas.data=t),"error-messages":_(l).errorMessage.value,type:"date",label:"Data(*)",autofocus:""},null,8,["modelValue","error-messages"]),E(o(h,{class:"ml-5 mr-5",modelValue:e.pi_lotes_receitas.valor,"onUpdate:modelValue":a[1]||(a[1]=t=>e.pi_lotes_receitas.valor=t),modelModifiers:{number:!0},"error-messages":_(A).errorMessage.value,label:"Valor(*)"},null,8,["modelValue","error-messages"]),[[U,"#####.##"]]),o(b,{"no-gutters":""},{default:r(()=>[o(u,{class:"ml-5 mr-5 mb-5",modelValue:e.pi_lotes_receitas.conta_id,"onUpdate:modelValue":a[2]||(a[2]=t=>e.pi_lotes_receitas.conta_id=t),items:e.contas,label:"Selecione uma Conta(*)","item-title":"descricao","item-value":"id","error-messages":_(k).errorMessage.value,clearable:""},null,8,["modelValue","items","error-messages"]),o(u,{class:"ml-5 mr-5 mb-5",modelValue:e.pi_lotes_receitas.lote_id,"onUpdate:modelValue":a[3]||(a[3]=t=>e.pi_lotes_receitas.lote_id=t),items:e.lotes,label:"Selecione um lote(*)","item-title":"nome","item-value":"id","error-messages":_(n).errorMessage.value,clearable:""},null,8,["modelValue","items","error-messages"])]),_:1}),o(b,{"no-gutters":""},{default:r(()=>[o(u,{class:"ml-5 mr-5 mt-1",modelValue:e.pi_lotes_receitas.predio_equipamento_id,"onUpdate:modelValue":a[4]||(a[4]=t=>e.pi_lotes_receitas.predio_equipamento_id=t),items:e.equipamentos,"item-title":"descricao","item-value":"id","error-messages":_(s).errorMessage.value,label:"Selecione um Equipamento",clearable:""},null,8,["modelValue","items","error-messages"]),o(u,{class:"ml-5 mr-5 mt-1",modelValue:e.pi_lotes_receitas.cobrar,"onUpdate:modelValue":a[5]||(a[5]=t=>e.pi_lotes_receitas.cobrar=t),items:e.cobranca,"item-title":"descricao","item-value":"id","error-messages":_(d).errorMessage.value,label:"Cobrar(*)",clearable:""},null,8,["modelValue","items","error-messages"])]),_:1}),o(h,{class:"ml-5 mr-5 mt-5",style:{height:"100px"},modelValue:e.pi_lotes_receitas.observacao,"onUpdate:modelValue":a[6]||(a[6]=t=>e.pi_lotes_receitas.observacao=t),"error-messages":_(v).errorMessage.value,label:"Observação"},null,8,["modelValue","error-messages"]),o(g,{class:"ml-5 me-4 mt-4",color:"red",onClick:e.returnToTableLotes},{default:r(()=>[p(" Voltar ")]),_:1},8,["onClick"]),o(P,{"max-width":"500"},{activator:r(({props:t})=>[o(g,R({class:"me-4 mt-4"},t,{color:"green",onClick:e.submit}),{default:r(()=>[p(" Salvar ")]),_:2},1040,["onClick"])]),default:r(({isActive:t})=>[e.showError?(f(),V(w,{key:0},{default:r(()=>[o(D,null,{default:r(()=>[p(" Faltou preencher os campos obrigatorios ")]),_:1}),o($,null,{default:r(()=>[o(B),o(g,{style:{"background-color":"#1b5175",color:"white"},onClick:G=>t.value=!1},{default:r(()=>[p("OK")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):q("",!0)]),_:1})]),_:1})],64)}}}),z=M(F,[["__scopeId","data-v-2908b2fd"]]),ae={__name:"LotesRegister",setup(i){return(l,s)=>(f(),V(z))}};export{ae as default};
