import{u as c}from"./vee-validate.esm-21a037af.js";import{A as C}from"./AppBar-b18ab963.js";import{_ as L,o as V,f as k,c as o,w as l,i as p,a2 as d,a1 as E,j as h,l as _,k as q,d as v,n as M,F as P,e as u,q as T,s as N,h as y}from"./index-00aeabf3.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";import{V as b}from"./VRow-7de6535c.js";import{V as f}from"./VAutocomplete-6d9bbb06.js";import{V as U}from"./VCheckbox-ba7dfe1e.js";import{V as $}from"./VDialog-774dba8d.js";import{V as D,c as R,d as w}from"./VCard-d3a9fcc6.js";import{V as B}from"./VSpacer-4c538066.js";import{V as j}from"./VContainer-83225802.js";import"./layout-8c213624.js";const H=n=>(T("data-v-93a63758"),n=n(),N(),n),O=H(()=>y("h1",{class:"ml-5 mt-5 mb-5",style:{color:"#777777"}},"Lancamentos",-1)),z={data(){return{userData:{},lancamentos:{descricao:void 0,conta_id:void 0,predio_ambiente_id:void 0,predio_equipamento_id:void 0,data:void 0,valor:void 0,recursos_proprios:void 0,pagador_cpfcnpj:void 0,pagador_nome:void 0,imprimir_boleto:void 0},showError:!1,contas:[],ambientes:[],equipamentos:[]}},methods:{returnToMainPage(){this.$router.push("/pi-lancamentos/index")},async carregarEquipamentosCombolist(){console.log(this.lancamentos.imprimir_boleto);const s={predio_token:JSON.parse(localStorage.getItem("predio")).predio_token};try{const t={Authorization:`Bearer ${this.userData.token}`},i=(await u.post("http://45.55.192.246:3333/service/gerencia/combolistEquipamentosLance",s,{headers:t})).data[0].func_json_equipamentos_combolist;this.equipamentos=i}catch(t){console.error("Erro ao carregar tipos:",t)}},async carregarAmbientesCombolist(){const s={predio_id:JSON.parse(localStorage.getItem("predio")).predio_id};try{const t={Authorization:`Bearer ${this.userData.token}`},i=(await u.post("http://45.55.192.246:3333service/gerencia/combolistAmbientes",s,{headers:t})).data.ambientes;this.ambientes=i}catch(t){console.error("Erro ao carregar tipos:",t)}},async carregarContasCombolist(){const s={predio_id:JSON.parse(localStorage.getItem("predio")).predio_id};try{const t={Authorization:`Bearer ${this.userData.token}`},i=(await u.post("http://45.55.192.246:3333/service/gerencia/combolistContas",s,{headers:t})).data.contas;this.contas=i}catch(t){console.error("Erro ao carregar tipos:",t)}},async loadLancamentosDetails(){try{const n={Authorization:`Bearer ${this.userData.token}`},s=await u.get(`http://45.55.192.246:3333/service/gerencia/getLancamentosById/${this.lancamentos.id}`,{headers:n});this.lancamentos.descricao=s.data.lancamentos.descricao,this.lancamentos.data=s.data.lancamentos.codigo,this.lancamentos.conta_id=s.data.lancamentos.conta_id,this.lancamentos.predio_equipamento_id=s.data.lancamentos.predio_equipamento_id,this.lancamentos.predio_ambiente_id=s.data.lancamentos.predio_ambiente_id,this.lancamentos.valor=s.data.lancamentos.valor,this.lancamentos.pagador_nome=s.data.lancamentos.pagador_nome,this.lancamentos.pagador_cpfcnpj=s.data.lancamentos.pagador_cpfcnpj,this.lancamentos.recursos_proprios=s.data.lancamentos.recursos_proprios,this.lancamentos.pagador_nome===null&&(this.lancamentos.imprimir_boleto=!0),console.log(s.data)}catch(n){console.error("Erro ao carregar detalhes do prédio_equipamentos:",n)}},async update(){this.lancamentos.predio_equipamento_id===void 0&&(this.lancamentos.predio_equipamento_id=null),this.lancamentos.conta_id===void 0&&(this.lancamentos.conta_id=null),this.lancamentos.predio_ambiente_id===void 0&&(this.lancamentos.predio_ambiente_id=null);const n=JSON.parse(localStorage.getItem("user")),s=JSON.parse(localStorage.getItem("predio")),t=!!this.lancamentos.recursos_proprios,m={descricao:this.lancamentos.descricao,valor:this.lancamentos.valor,predio_ambiente_id:this.lancamentos.predio_ambiente_id,conta_id:this.lancamentos.conta_id,predio_equipamento_id:this.lancamentos.predio_equipamento_id,data:this.lancamentos.data,pagador_cpfcnpj:this.lancamentos.pagador_cpfcnpj,pagador_nome:this.lancamentos.pagador_nome,predio_id:s.predio_id,user_alteracao:n.id,recursos_proprios:t};try{const i={Authorization:`Bearer ${this.userData.token}`},g=await u.put(`http://45.55.192.246:3333/service/gerencia/updateLancamentos/${this.lancamentos.id}`,m,{headers:i});return this.$router.push("/pi-lancamentos/index"),g}catch(i){console.error("Erro na criação do registro:",i),this.showError=!0}}},created(){this.$route.query.id?this.lancamentos.id=this.$route.query.id:console.log("Erro em carregar dados")},mounted(){this.userData=JSON.parse(localStorage.getItem("user")),this.loadLancamentosDetails(),this.carregarContasCombolist(),this.carregarEquipamentosCombolist(),this.carregarAmbientesCombolist()}},J=Object.assign(z,{__name:"UpdateLancamentos",setup(n){const s=c("descricao"),t=c("equipamento_id"),m=c("vida_util"),i=c("codigo"),g=c("fabricante"),A=c("entra_pmoc");return(e,r)=>{const I=L("mask");return V(),k(P,null,[o(C),o(j,null,{default:l(()=>[O,o(b,{"no-gutters":""},{default:l(()=>[o(p,{class:"ml-5 mr-5",modelValue:e.lancamentos.data,"onUpdate:modelValue":r[0]||(r[0]=a=>e.lancamentos.data=a),"error-messages":d(g).errorMessage.value,label:"Data(*)",type:"date",autofocus:""},null,8,["modelValue","error-messages"])]),_:1}),E(o(p,{class:"ml-5 mr-5",modelValue:e.lancamentos.valor,"onUpdate:modelValue":r[1]||(r[1]=a=>e.lancamentos.valor=a),modelModifiers:{number:!0},"error-messages":d(m).errorMessage.value,label:"Valor",disabled:e.lancamentos.pagador_nome===null},null,8,["modelValue","error-messages","disabled"]),[[I,"#####"]]),o(p,{class:"ml-5 mr-5",modelValue:e.lancamentos.descricao,"onUpdate:modelValue":r[2]||(r[2]=a=>e.lancamentos.descricao=a),"error-messages":d(s).errorMessage.value,label:"Descrição",disabled:e.lancamentos.pagador_nome===null},null,8,["modelValue","error-messages","disabled"]),o(b,{"no-gutters":""},{default:l(()=>[o(f,{class:"ml-5 mr-5 mb-5",modelValue:e.lancamentos.predio_equipamento_id,"onUpdate:modelValue":r[3]||(r[3]=a=>e.lancamentos.predio_equipamento_id=a),items:e.equipamentos,"item-title":"descricao","item-value":"id","error-messages":d(t).errorMessage.value,label:"Selecione um Equipamento",dense:"",clearable:""},null,8,["modelValue","items","error-messages"]),o(f,{class:"ml-5 mr-5 mb-5",modelValue:e.lancamentos.conta_id,"onUpdate:modelValue":r[4]||(r[4]=a=>e.lancamentos.conta_id=a),items:e.contas,"item-title":"descricao","item-value":"id","error-messages":d(t).errorMessage.value,label:"Selecione uma Conta(*)",dense:"",disabled:e.lancamentos.pagador_nome===null,clearable:""},null,8,["modelValue","items","error-messages","disabled"]),o(f,{class:"ml-5 mr-5 mb-5",modelValue:e.lancamentos.predio_ambiente_id,"onUpdate:modelValue":r[5]||(r[5]=a=>e.lancamentos.predio_ambiente_id=a),items:e.ambientes,"item-title":"descricao","item-value":"id","error-messages":d(t).errorMessage.value,label:"Selecione um Ambiente",dense:"",clearable:""},null,8,["modelValue","items","error-messages"])]),_:1}),o(b,{"no-gutters":""},{default:l(()=>[o(U,{class:"ml-5 mr-5",modelValue:e.lancamentos.imprimir_boleto,"onUpdate:modelValue":r[6]||(r[6]=a=>e.lancamentos.imprimir_boleto=a),"error-messages":d(A).errorMessage.value,label:"Imprimir Boleto"},null,8,["modelValue","error-messages"]),o(p,{class:"ml-5 mr-5",modelValue:e.lancamentos.pagador_cpfcnpj,"onUpdate:modelValue":r[7]||(r[7]=a=>e.lancamentos.pagador_cpfcnpj=a),disabled:!e.lancamentos.imprimir_boleto,"error-messages":d(i).errorMessage.value,label:"CPF/CNPJ"},null,8,["modelValue","disabled","error-messages"]),o(p,{class:"ml-5 mr-5",modelValue:e.lancamentos.pagador_nome,"onUpdate:modelValue":r[8]||(r[8]=a=>e.lancamentos.pagador_nome=a),disabled:!e.lancamentos.imprimir_boleto,"error-messages":d(i).errorMessage.value,label:"Pagador"},null,8,["modelValue","disabled","error-messages"])]),_:1}),o(U,{class:"ml-5 mr-5",modelValue:e.lancamentos.entra_pmoc,"onUpdate:modelValue":r[9]||(r[9]=a=>e.lancamentos.entra_pmoc=a),"error-messages":d(A).errorMessage.value,label:"Recursos Proprios"},null,8,["modelValue","error-messages"]),o(h,{class:"me-4 mt-8",color:"red",onClick:e.returnToMainPage},{default:l(()=>[_(" Voltar ")]),_:1},8,["onClick"]),o($,{"max-width":"500"},{activator:l(({props:a})=>[o(h,q({class:"me-4 mt-8"},a,{color:"green",onClick:e.update}),{default:l(()=>[_(" Atualizar ")]),_:2},1040,["onClick"])]),default:l(({isActive:a})=>[e.showError?(V(),v(D,{key:0},{default:l(()=>[o(R,null,{default:l(()=>[_(" Ocorreu erro ao atualizar o campo. ")]),_:1}),o(w,null,{default:l(()=>[o(B),o(h,{style:{"background-color":"#1b5175",color:"white"},onClick:G=>a.value=!1},{default:l(()=>[_("OK")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):M("",!0)]),_:1})]),_:1})],64)}}}),F=S(J,[["__scopeId","data-v-93a63758"]]),te={__name:"UpdateLancamentos",setup(n){return(s,t)=>(V(),v(F))}};export{te as default};
