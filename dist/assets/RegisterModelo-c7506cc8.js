import{u as n}from"./vee-validate.esm-9e73a9b7.js";import{A as M}from"./AppBar-f0429b7c.js";import{_ as k,o as V,f as A,c as o,w as r,i as u,a2 as i,a1 as U,j as g,l as _,k as T,d as h,n as q,F as I,e as W,q as C,s as E,h as S}from"./index-88a5129e.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import{V as f}from"./VRow-0c716acb.js";import{V as N}from"./VAutocomplete-6839ad36.js";import{V as P}from"./VCheckbox-7cff8cb4.js";import{V as R}from"./VDialog-b3b4de36.js";import{V as y,c as B,d as D}from"./VCard-2409a6d1.js";import{V as $}from"./VSpacer-49a1f52c.js";import{V as F}from"./VContainer-2697f82e.js";import"./layout-44c14d18.js";const O=t=>(C("data-v-a3a29b94"),t=t(),E(),t),L=O(()=>S("h1",{class:"ml-5 mt-5 mb-5",style:{color:"#777777"}},"Equipamentos Modelo",-1)),H={data(){return{userData:{},modelos:{descricao:void 0,codigo:void 0,entra_pmoc:void 0,fabricante:void 0,equipamento_tipo_id:void 0,vida_util:void 0},showError:!1,tipos:[]}},methods:{returnToMainPage(){this.$router.push("/equipamentos-modelos/index")},async loadTipos(){const t={Authorization:`Bearer ${this.userData.token}`},d={token_predio:JSON.parse(localStorage.getItem("predio")).predio_token};console.log("WWWWWWWWWWWWWWWWWWWWW-TEST-WWWWWWWWWWWWWWWWWWW");try{const l=(await W.post("http://localhost:3333/service/gerencia/listaTiposEquipamentos",d,{headers:t})).data[0].func_json_tiposequipamentos;this.tipos=l}catch(m){console.error("Erro ao carregar tipos:",m)}},async submit(){this.modelos.equipamento_tipo_id===void 0&&(this.modelos.equipamento_tipo_id=null);const t=JSON.parse(localStorage.getItem("predio")),p=JSON.parse(localStorage.getItem("user")),d=!!this.modelos.entra_pmoc,m={descricao:this.modelos.descricao,vida_util:this.modelos.vida_util,codigo:this.modelos.codigo,fabricante:this.modelos.fabricante,equipamento_tipo_id:this.modelos.equipamento_tipo_id,entra_pmoc:d,predio_id:t.predio_id,user_created:p.id};try{const l={Authorization:`Bearer ${this.userData.token}`},c=await W.post("http://localhost:3333/service/gerencia/createModeloEquipamentos",m,{headers:l});return this.$router.push("/equipamentos-modelos/index"),c}catch(l){console.error("Erro na criação do registro:",l),this.showError=!0}}},mounted(){this.userData=JSON.parse(localStorage.getItem("user")),this.loadTipos()}},J=Object.assign(H,{__name:"RegisterEquipamentoModelo",setup(t){const p=n("descricao"),d=n("equipamento_tipo_id"),m=n("vida_util"),l=n("codigo"),c=n("fabricante"),b=n("entra_pmoc");return(e,a)=>{const v=k("mask");return V(),A(I,null,[o(M),o(F,null,{default:r(()=>[L,o(f,{"no-gutters":""},{default:r(()=>[o(u,{class:"ml-5 mr-5",modelValue:e.modelos.fabricante,"onUpdate:modelValue":a[0]||(a[0]=s=>e.modelos.fabricante=s),"error-messages":i(c).errorMessage.value,label:"Fabricante",dense:"",autofocus:""},null,8,["modelValue","error-messages"]),o(u,{class:"ml-5 mr-5",modelValue:e.modelos.codigo,"onUpdate:modelValue":a[1]||(a[1]=s=>e.modelos.codigo=s),"error-messages":i(l).errorMessage.value,label:"Codigo"},null,8,["modelValue","error-messages"])]),_:1}),o(f,{"no-gutters":""},{default:r(()=>[o(N,{class:"ml-5 mr-5 mb-5",modelValue:e.modelos.equipamento_tipo_id,"onUpdate:modelValue":a[2]||(a[2]=s=>e.modelos.equipamento_tipo_id=s),items:e.tipos,"item-title":"descricao","item-value":"id","error-messages":i(d).errorMessage.value,label:"Selecione um Tipo(*)",style:{"max-width":"400px"},dense:"",clearable:""},null,8,["modelValue","items","error-messages"]),o(u,{class:"ml-5 mr-5",modelValue:e.modelos.fabricante,"onUpdate:modelValue":a[3]||(a[3]=s=>e.modelos.fabricante=s),"error-messages":i(c).errorMessage.value,label:"Fabricante",dense:""},null,8,["modelValue","error-messages"])]),_:1}),o(u,{class:"ml-5 mr-5",modelValue:e.modelos.descricao,"onUpdate:modelValue":a[4]||(a[4]=s=>e.modelos.descricao=s),"error-messages":i(p).errorMessage.value,label:"Descrição"},null,8,["modelValue","error-messages"]),o(f,{"no-gutters":""},{default:r(()=>[o(u,{class:"ml-5 mr-5",modelValue:e.modelos.codigo,"onUpdate:modelValue":a[5]||(a[5]=s=>e.modelos.codigo=s),"error-messages":i(l).errorMessage.value,label:"Codigo"},null,8,["modelValue","error-messages"]),U(o(u,{class:"ml-5 mr-5",modelValue:e.modelos.vida_util,"onUpdate:modelValue":a[6]||(a[6]=s=>e.modelos.vida_util=s),modelModifiers:{number:!0},"error-messages":i(m).errorMessage.value,label:"Vida Util(Meses)(*)"},null,8,["modelValue","error-messages"]),[[v,"##"]])]),_:1}),o(P,{class:"ml-5 mr-5",modelValue:e.modelos.entra_pmoc,"onUpdate:modelValue":a[7]||(a[7]=s=>e.modelos.entra_pmoc=s),"error-messages":i(b).errorMessage.value,label:"Incluir no PMOC"},null,8,["modelValue","error-messages"]),o(g,{class:"me-4 mt-8",color:"red",onClick:e.returnToMainPage},{default:r(()=>[_(" Voltar ")]),_:1},8,["onClick"]),o(R,{"max-width":"500"},{activator:r(({props:s})=>[o(g,T({class:"me-4 mt-8"},s,{color:"green",onClick:e.submit}),{default:r(()=>[_(" Salvar ")]),_:2},1040,["onClick"])]),default:r(({isActive:s})=>[e.showError?(V(),h(y,{key:0},{default:r(()=>[o(B,null,{default:r(()=>[_(" Faltou preencher os campos obrigatorios ")]),_:1}),o(D,null,{default:r(()=>[o($),o(g,{style:{"background-color":"#1b5175",color:"white"},onClick:z=>s.value=!1},{default:r(()=>[_("OK")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):q("",!0)]),_:1})]),_:1})],64)}}}),j=w(J,[["__scopeId","data-v-a3a29b94"]]),te={__name:"RegisterModelo",setup(t){return(p,d)=>(V(),h(j))}};export{te as default};
