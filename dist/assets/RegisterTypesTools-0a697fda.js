import{A as V}from"./AppBar-caeecede.js";import{u as d}from"./vee-validate.esm-472c5a5d.js";import{o as g,f as A,c as e,w as a,i as c,a2 as n,j as u,l as m,k as v,d as b,n as U,F as I,e as _,q as k,s as S,h as y}from"./index-bf573807.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{V as h}from"./VRow-835fc559.js";import{V as T}from"./VAutocomplete-22e1fd5b.js";import{V as P}from"./VDialog-7687c8ff.js";import{V as w,c as R,d as M}from"./VCard-8ca74176.js";import{V as C}from"./VSpacer-441d260f.js";import{V as N}from"./VContainer-bdb2f7f7.js";import"./layout-c76e1f01.js";const L=o=>(k("data-v-fd6c0bbb"),o=o(),S(),o),$=L(()=>y("h1",{class:"ml-5 mt-5 mb-5",style:{color:"#777777"}},"Tipos Equipamentos",-1)),B={data(){return{prediosTipos:{descricao:void 0,sistema_id:void 0,tabvalores_segmento_id:void 0,icone_ok:void 0,icone_problema:void 0},showError:!1,segmentos:[],sistemas:[]}},methods:{returnToMainPage(){this.$router.push("/equipamentos-tipos/index")},async carregarSegmentos(){try{const l=(await _.get("http://45.55.192.246:3333/service/gerencia/listaSegmentos",{headers})).data[0].func_json_segmentos;this.segmentos=l}catch(o){console.error("Erro na chamada de API:",o)}},async carregarSistemas(){try{const o={Authorization:`Bearer ${this.userData.token}`},i=(await _.get("http://45.55.192.246:3333/service/gerencia/listaSistemas",{headers:o})).data[0].func_json_sistemas;this.sistemas=i}catch(o){console.error("Erro na chamada de API:",o)}},async submit(){this.prediosTipos.sistema_id===void 0&&(this.prediosTipos.sistema_id=null),this.prediosTipos.tabvalores_segmento_id===void 0&&(this.prediosTipos.tabvalores_segmento_id=null);const o=JSON.parse(localStorage.getItem("user")),l={descricao:this.prediosTipos.descricao,icone_ok:this.prediosTipos.icone_ok,icone_problema:this.prediosTipos.icone_problema,sistema_id:this.prediosTipos.sistema_id,tabvalores_segmento_id:this.prediosTipos.tabvalores_segmento_id,user_created:o.id};try{const i={Authorization:`Bearer ${this.userData.token}`},p=await _.post("http://45.55.192.246:3333/service/gerencia/createEquipamentos",l,{headers:i});return this.$router.push("/equipamentos-tipos/index"),p}catch(i){console.error("Erro na criação do registro:",i),this.showError=!0}}},mounted(){this.userData=JSON.parse(localStorage.getItem("user")),this.carregarSegmentos(),this.carregarSistemas()}},D=Object.assign(B,{__name:"RegisterTypesTools",setup(o){const l=d("descricao"),i=d("sistema_id"),p=d("tabvalores_segmento_id"),f=d("icone");return(s,t)=>(g(),A(I,null,[e(V),e(N,null,{default:a(()=>[$,e(c,{class:"ml-5 mr-5",modelValue:s.prediosTipos.descricao,"onUpdate:modelValue":t[0]||(t[0]=r=>s.prediosTipos.descricao=r),"error-messages":n(l).errorMessage.value,label:"Descrição(*)",autofocus:""},null,8,["modelValue","error-messages"]),e(h,{"no-gutters":""},{default:a(()=>[e(T,{class:"ml-5 mr-5",modelValue:s.prediosTipos.sistema_id,"onUpdate:modelValue":t[1]||(t[1]=r=>s.prediosTipos.sistema_id=r),items:s.sistemas,"item-title":"descricao","item-value":"id","error-messages":n(i).errorMessage.value,label:"Selecione um Sistema(*)",style:{"max-width":"545px"},clearable:""},null,8,["modelValue","items","error-messages"]),e(T,{class:"ml-5 mr-5",modelValue:s.prediosTipos.tabvalores_segmento_id,"onUpdate:modelValue":t[2]||(t[2]=r=>s.prediosTipos.tabvalores_segmento_id=r),items:s.segmentos,label:"Selecione um segmento","item-title":"descricao","item-value":"id","error-messages":n(p).errorMessage.value,clearable:"",style:{"max-width":"600px"}},null,8,["modelValue","items","error-messages"])]),_:1}),e(h,{"no-gutters":""},{default:a(()=>[e(c,{class:"ml-5 mr-5 mt-5",modelValue:s.prediosTipos.icone_ok,"onUpdate:modelValue":t[3]||(t[3]=r=>s.prediosTipos.icone_ok=r),"error-messages":n(f).errorMessage.value,label:"Icone OK"},null,8,["modelValue","error-messages"]),e(c,{class:"ml-5 mr-5 mt-5",modelValue:s.prediosTipos.icone_problema,"onUpdate:modelValue":t[4]||(t[4]=r=>s.prediosTipos.icone_problema=r),"error-messages":n(f).errorMessage.value,label:"Icone Problema"},null,8,["modelValue","error-messages"])]),_:1}),e(u,{class:"ml-5 me-4 mt-8",color:"red",onClick:s.returnToMainPage},{default:a(()=>[m(" Voltar")]),_:1},8,["onClick"]),e(P,{"max-width":"500"},{activator:a(({props:r})=>[e(u,v({class:"me-4 mt-8"},r,{color:"green",onClick:s.submit}),{default:a(()=>[m(" Salvar ")]),_:2},1040,["onClick"])]),default:a(({isActive:r})=>[s.showError?(g(),b(w,{key:0},{default:a(()=>[e(R,null,{default:a(()=>[m(" Faltou preencher os campos obrigatorios ")]),_:1}),e(M,null,{default:a(()=>[e(C),e(u,{style:{"background-color":"#1b5175",color:"white"},onClick:q=>r.value=!1},{default:a(()=>[m("OK")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):U("",!0)]),_:1})]),_:1})],64))}}),H=E(D,[["__scopeId","data-v-fd6c0bbb"]]),Y={__name:"RegisterTypesTools",setup(o){return(l,i)=>(g(),b(H))}};export{Y as default};
