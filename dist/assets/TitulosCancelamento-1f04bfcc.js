import{A}from"./AppBar-f0429b7c.js";import{r as p,o as m,d as g,w as e,c as o,f as C,l as s,x as l,a4 as _,j as u,k as I,e as f,q as T,s as k,h as v}from"./index-88a5129e.js";import{_ as y}from"./_plugin-vue_export-helper-c27b6911.js";import{V as h}from"./VContainer-2697f82e.js";import{V as n}from"./VCol-888c2a5e.js";import{V as d}from"./VSheet-61cd24e9.js";import{V as P}from"./VDialog-b3b4de36.js";import{V as L}from"./VCard-2409a6d1.js";import{V as S}from"./VSpacer-49a1f52c.js";import"./VAutocomplete-6839ad36.js";import"./layout-44c14d18.js";const $=t=>(T("data-v-34ea1222"),t=t(),k(),t),w={key:1},U=$(()=>v("h1",{class:"ml-1 mt-5",style:{color:"#777777"}},"Cancelar Titulo",-1)),N={data(){return{userData:{},dados:{},loading:!0,dialog:!1}},methods:{returnToMainPage(){this.$router.push("/gestao-perimetros/index")},async updateProrrogacao(){try{const t={Authorization:`Bearer ${this.userData.token}`},a=JSON.parse(localStorage.getItem("user")),r={dt_cancelamento:new Date().toISOString(),user_alteracao:a.id},i=await f.put(`http://localhost:3333/service/gerencia/updatePrediosTitulos/${this.dados.documento}`,r,{headers:t});return console.log(i),this.$router.push("/gestao-perimetros/index"),i}catch(t){console.error("Erro na chamada de API:",t)}},async loadLotes(){try{const t={Authorization:`Bearer ${this.userData.token}`},a=await f.get(`http://localhost:3333/service/gerencia/getPrediosTitulosById/${this.dados.documento}`,{headers:t});this.dados=a.data,console.log(this.dados)}catch(t){console.error("Erro na chamada de API:",t)}finally{this.loading=!1}}},created(){this.$route.query.documento?(this.dados.documento=this.$route.query.documento,this.loadLotes()):console.log("Erro em carregar dados")},mounted(){this.userData=JSON.parse(localStorage.getItem("user")),(async()=>await this.loadLotes())()}},B=Object.assign(N,{__name:"TitulosCancelamento",setup(t){return(a,r)=>{const i=p("font-awesome-icon"),V=p("LoadingComponent");return a.loading?(m(),g(V,{key:0},{default:e(()=>[o(i,{icon:["fas","spinner"],spin:""})]),_:1})):(m(),C("div",w,[o(A),o(h,null,{default:e(()=>[U,o(h,{class:"data-container mt-7 mb-8"},{default:e(()=>[o(n,null,{default:e(()=>[o(d,{class:"pa-2 ma-2"},{default:e(()=>[s(" Lote: "+l(a.dados.pi_lotes.numero)+" - "+l(a.dados.pi_lotes.nome),1)]),_:1})]),_:1}),o(n,null,{default:e(()=>[o(d,{class:"pa-2 ma-2"},{default:e(()=>[s(" Título: "+l(a.dados.documento),1)]),_:1})]),_:1}),o(_,{width:"100%"}),o(n,null,{default:e(()=>[o(d,{class:"pa-2 ma-2"},{default:e(()=>[s(" Nosso Número: "+l(a.dados.nosso_numero),1)]),_:1})]),_:1}),o(n,null,{default:e(()=>[o(d,{class:"pa-2 ma-2"},{default:e(()=>[s(" Valor:R$ "+l(a.dados.valor),1)]),_:1})]),_:1}),o(n,null,{default:e(()=>[o(d,{class:"pa-2 ma-2"},{default:e(()=>[s("Vencimento: "+l(a.dados.dt_vencimento),1)]),_:1})]),_:1}),o(_,{width:"100%"}),o(n,null,{default:e(()=>[o(d,{class:"pa-2 ma-2"},{default:e(()=>[s(" Link do Boleto: "+l(a.dados.link_boleto),1)]),_:1})]),_:1})]),_:1}),o(u,{class:"me-4",color:"red",onClick:a.returnToMainPage},{default:e(()=>[s(" Voltar ")]),_:1},8,["onClick"]),o(P,{modelValue:a.dialog,"onUpdate:modelValue":r[1]||(r[1]=c=>a.dialog=c),"max-width":"400",persistent:""},{activator:e(({props:c})=>[o(u,I({class:"me-4"},c,{color:"green"}),{default:e(()=>[s(" Salvar ")]),_:2},1040)]),default:e(()=>[o(L,{text:"Deseja salvar esta data de cancelamento?",title:"Confirmação"},{actions:e(()=>[o(S),o(u,{onClick:r[0]||(r[0]=c=>a.dialog=!1)},{default:e(()=>[s(" Voltar ")]),_:1}),o(u,{onClick:a.updateProrrogacao},{default:e(()=>[s(" Confirmar ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]))}}}),D=y(B,[["__scopeId","data-v-34ea1222"]]),x={__name:"TitulosCancelamento",setup(t){return(a,r)=>(m(),g(D))}};export{x as default};
