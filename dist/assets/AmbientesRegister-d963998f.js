import{u as m}from"./vee-validate.esm-21a037af.js";import{A as U}from"./AppBar-b18ab963.js";import{_ as T,o as f,f as I,c as e,w as a,i as c,a2 as p,a1 as b,j as _,l as u,k as M,d as v,n as N,F as S,e as g,q as P,s as R,h as w}from"./index-00aeabf3.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{V as A}from"./VRow-7de6535c.js";import{V}from"./VAutocomplete-6d9bbb06.js";import{V as E}from"./VDialog-774dba8d.js";import{V as y,c as D,d as $}from"./VCard-d3a9fcc6.js";import{V as B}from"./VSpacer-4c538066.js";import{V as L}from"./VContainer-83225802.js";import"./layout-8c213624.js";const O=o=>(P("data-v-ebe6c942"),o=o(),R(),o),H=O(()=>w("h1",{class:"ml-5 mt-5 mb-5",style:{color:"#777777"}},"Ambientes",-1)),F={data(){return{userData:{},predios:{descricao:void 0,numero_ocupantes:void 0,area:void 0,tabvalores_tipo_ambiente_id:void 0,predio_area_id:void 0},showError:!1,tipos:[],areas:[]}},methods:{returnToMainPage(){this.$router.push("/predios-ambientes/index")},async loadTipos(){const o={Authorization:`Bearer ${this.userData.token}`};try{const d=(await g.get("http://45.55.192.246:3333/service/gerencia/listaTiposAmbientes",{headers:o})).data[0].func_json_tiposambientes;this.tipos=d}catch(i){console.error("Erro ao carregar tipos:",i)}},async loadAreas(){const o={Authorization:`Bearer ${this.userData.token}`},d={predio_token:JSON.parse(localStorage.getItem("predio")).predio_token};try{const n=(await g.post("http://45.55.192.246:3333/service/gerencia/listaAreasAmbientes",d,{headers:o})).data[0].func_json_areas;this.areas=n}catch(l){console.error("Erro ao carregar áreas:",l)}},async submit(){const o={Authorization:`Bearer ${this.userData.token}`};this.predios.predio_area_id===void 0&&(this.predios.predio_area_id=null),this.predios.numero_ocupantes===void 0&&(this.predios.numero_ocupantes=null);const i=JSON.parse(localStorage.getItem("predio")),d=JSON.parse(localStorage.getItem("user")),l={descricao:this.predios.descricao,numero_ocupantes:this.predios.numero_ocupantes,area:this.predios.area,tabvalores_tipo_ambiente_id:this.predios.tabvalores_tipo_ambiente_id,predio_area_id:this.predios.predio_area_id,predio_id:i.predio_id,user_created:d.id};try{const n=await g.post("http://45.55.192.246:3333/service/gerencia/PrediosAmbienteCadastro",l,{headers:o});return this.$router.push("/predios-ambientes/index"),n}catch(n){console.error("Erro na criação do registro:",n),this.showError=!0}}},mounted(){this.userData=JSON.parse(localStorage.getItem("user")),this.loadAreas(),this.loadTipos()}},j=Object.assign(F,{__name:"RegisterAmbientes",setup(o){const i=m("descricao"),d=m("numero_ocupantes"),l=m("area"),n=m("tabvalores_tipo_ambiente_id"),k=m("predio_area_id");return(r,t)=>{const h=T("mask");return f(),I(S,null,[e(U),e(L,null,{default:a(()=>[H,e(c,{class:"ml-5 mr-5",modelValue:r.predios.descricao,"onUpdate:modelValue":t[0]||(t[0]=s=>r.predios.descricao=s),"error-messages":p(i).errorMessage.value,label:"Descrição(*)",autofocus:""},null,8,["modelValue","error-messages"]),e(A,{"no-gutters":""},{default:a(()=>[e(V,{class:"ml-5 align-end",modelValue:r.predios.tabvalores_tipo_ambiente_id,"onUpdate:modelValue":t[1]||(t[1]=s=>r.predios.tabvalores_tipo_ambiente_id=s),items:r.tipos,"item-title":"descricao","item-value":"id","error-messages":p(n).errorMessage.value,label:"Selecione um Tipo",clearable:""},null,8,["modelValue","items","error-messages"]),e(V,{class:"ml-5 mr-5",modelValue:r.predios.predio_area_id,"onUpdate:modelValue":t[2]||(t[2]=s=>r.predios.predio_area_id=s),items:r.areas,label:"Selecione uma Área","item-title":"descricao","item-value":"id","error-messages":p(k).errorMessage.value},null,8,["modelValue","items","error-messages"])]),_:1}),e(A,{class:"mt-5","no-gutters":""},{default:a(()=>[b(e(c,{class:"ml-5",modelValue:r.predios.numero_ocupantes,"onUpdate:modelValue":t[3]||(t[3]=s=>r.predios.numero_ocupantes=s),modelModifiers:{number:!0},"error-messages":p(d).errorMessage.value,label:"Numero Ocupantes"},null,8,["modelValue","error-messages"]),[[h,"###"]]),b(e(c,{class:"ml-5 mr-5",modelValue:r.predios.area,"onUpdate:modelValue":t[4]||(t[4]=s=>r.predios.area=s),modelModifiers:{number:!0},"error-messages":p(l).errorMessage.value,label:"Área(m2)"},null,8,["modelValue","error-messages"]),[[h,"###.##"]])]),_:1}),e(_,{class:"ml-5 me-4 mt-8",color:"red",onClick:r.returnToMainPage},{default:a(()=>[u(" Voltar ")]),_:1},8,["onClick"]),e(E,{"max-width":"500"},{activator:a(({props:s})=>[e(_,M({class:"me-4 mt-8"},s,{color:"green",onClick:r.submit}),{default:a(()=>[u(" Salvar ")]),_:2},1040,["onClick"])]),default:a(({isActive:s})=>[r.showError?(f(),v(y,{key:0},{default:a(()=>[e(D,null,{default:a(()=>[u(" Faltou preencher os campos obrigatorios ")]),_:1}),e($,null,{default:a(()=>[e(B),e(_,{style:{"background-color":"#1b5175",color:"white"},onClick:z=>s.value=!1},{default:a(()=>[u("OK")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):N("",!0)]),_:1})]),_:1})],64)}}}),J=C(j,[["__scopeId","data-v-ebe6c942"]]),se={__name:"AmbientesRegister",setup(o){return(i,d)=>(f(),v(J))}};export{se as default};
