import{A as E}from"./AppBar-b18ab963.js";import{u as l}from"./vee-validate.esm-21a037af.js";import{_ as N,o as h,f as P,c as s,w as t,i as p,a2 as i,a1 as c,j as q,l as g,k as R,d as v,n as w,F as y,e as f,q as C,s as D,h as B}from"./index-00aeabf3.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import{V as b}from"./VRow-7de6535c.js";import{V}from"./VAutocomplete-6d9bbb06.js";import{V as $}from"./VDialog-774dba8d.js";import{V as O,c as H,d as G}from"./VCard-d3a9fcc6.js";import{V as F}from"./VSpacer-4c538066.js";import{V as J}from"./VContainer-83225802.js";import"./layout-8c213624.js";const j=d=>(C("data-v-beb67196"),d=d(),D(),d),z=j(()=>B("h1",{class:"mt-5 mb-5",style:{color:"#777777"}},"Predios Equipamentos",-1)),K={data(){return{userData:{},predios_equipamentos:{descricao:void 0,codigo:void 0,ano_fabricacao:void 0,patrimonio:void 0,potencia:void 0,vlr_compra:void 0,numero_serie:void 0,data_operacao:void 0,predio_ambiente_id:void 0,modelo_id:void 0,user_gestor:void 0},showError:!1,ambientes:[],modelos:[],users:[]}},methods:{returnToTableTools(){this.$router.push("/predios-equipamentos/index")},async loadAmbientes(){const n={predio_token:JSON.parse(localStorage.getItem("predio")).predio_token};try{const a={Authorization:`Bearer ${this.userData.token}`},m=await f.post("http://45.55.192.246:3333/service/gerencia/listaAmbientes",n,{headers:a}),u=m.data[0].func_json_ambientes;this.ambientes=u,console.log(m)}catch(a){console.error("Erro ao carregar tipos:",a)}},async loadModelos(){const n={token_predio:JSON.parse(localStorage.getItem("predio")).predio_token};try{const a={Authorization:`Bearer ${this.userData.token}`},u=(await f.post("http://45.55.192.246:3333/service/gerencia/listaModeloEquipamentos",n,{headers:a})).data[0].func_json_modelos_equipamentos;this.modelos=u}catch(a){console.error("Erro ao carregar áreas:",a)}},async loadUsers(){const n={predio_token:JSON.parse(localStorage.getItem("predio")).predio_token};try{const a={Authorization:`Bearer ${this.userData.token}`},u=(await f.post("http://45.55.192.246:3333/service/gerencia/PrediosEquipamentosGestores",n,{headers:a})).data[0].func_json_gestores;this.users=u}catch(a){console.error("Erro ao carregar áreas:",a)}},async submit(){this.predios_equipamentos.modelo_id===void 0&&(this.predios_equipamentos.modelo_id=null),this.predios_equipamentos.predio_ambiente_id===void 0&&(this.predios_equipamentos.predio_ambiente_id=null),this.predios_equipamentos.user_gestor===void 0&&(this.predios_equipamentos.user_gestor=null);const d=JSON.parse(localStorage.getItem("predio")),n=JSON.parse(localStorage.getItem("user")),a={descricao:this.predios_equipamentos.descricao,codigo:this.predios_equipamentos.codigo,ano_fabricacao:this.predios_equipamentos.ano_fabricacao,patrimonio:this.predios_equipamentos.patrimonio,potencia:this.predios_equipamentos.potencia,vlr_compra:this.predios_equipamentos.vlr_compra,numero_serie:this.predios_equipamentos.numero_serie,data_operacao:this.predios_equipamentos.data_operacao,modelo_id:this.predios_equipamentos.modelo_id,predio_ambiente_id:this.predios_equipamentos.predio_ambiente_id,user_gestor:this.predios_equipamentos.user_gestor,predio_id:d.predio_id,user_created:n.id};try{const m={Authorization:`Bearer ${this.userData.token}`},u=await f.post("http://45.55.192.246:3333/service/gerencia/PrediosEquipamentosCadastro",a,{headers:m});return this.$router.push("/predios-equipamentos/index"),u}catch(m){console.error("Erro na criação do registro:",m),this.showError=!0}}},mounted(){this.userData=JSON.parse(localStorage.getItem("user")),this.loadModelos(),this.loadAmbientes(),this.loadUsers()}},Q=Object.assign(K,{__name:"RegisterBuildTools",setup(d){const n=l("descricao"),a=l("codigo"),m=l("ano_fabricacao"),u=l("patrimonio"),U=l("potencia"),T=l("vlr_compra"),k=l("numero_serie"),M=l("data_operacao"),I=l("modelo_id"),S=l("predio_ambiente_id"),A=l("user_gestor");return(e,r)=>{const _=N("mask");return h(),P(y,null,[s(E),s(J,null,{default:t(()=>[z,s(p,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.descricao,"onUpdate:modelValue":r[0]||(r[0]=o=>e.predios_equipamentos.descricao=o),"error-messages":i(n).errorMessage.value,label:"Descrição(*)",autofocus:""},null,8,["modelValue","error-messages"]),s(b,{"no-gutters":""},{default:t(()=>[s(V,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.modelo_id,"onUpdate:modelValue":r[1]||(r[1]=o=>e.predios_equipamentos.modelo_id=o),items:e.modelos,"item-title":"descricao","item-value":"id","error-messages":i(I).errorMessage.value,label:"Selecione um Modelo(*)",clearable:""},null,8,["modelValue","items","error-messages"]),s(V,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.predio_ambiente_id,"onUpdate:modelValue":r[2]||(r[2]=o=>e.predios_equipamentos.predio_ambiente_id=o),items:e.ambientes,"item-title":"descricao","item-value":"id","error-messages":i(S).errorMessage.value,label:"Selecione um Ambiente(*)",clearable:""},null,8,["modelValue","items","error-messages"]),s(V,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.user_gestor,"onUpdate:modelValue":r[3]||(r[3]=o=>e.predios_equipamentos.user_gestor=o),items:e.users,label:"Selecione um Gestor","item-title":"nome","item-value":"id","error-messages":i(A).errorMessage.value,clearable:""},null,8,["modelValue","items","error-messages"])]),_:1}),s(b,{"no-gutters":""},{default:t(()=>[s(p,{class:"ml-5 mr-5 mt-5",modelValue:e.predios_equipamentos.codigo,"onUpdate:modelValue":r[4]||(r[4]=o=>e.predios_equipamentos.codigo=o),"error-messages":i(a).errorMessage.value,label:"Codigo"},null,8,["modelValue","error-messages"]),c(s(p,{class:"ml-5 mr-5 mt-5",modelValue:e.predios_equipamentos.vlr_compra,"onUpdate:modelValue":r[5]||(r[5]=o=>e.predios_equipamentos.vlr_compra=o),modelModifiers:{number:!0},"error-messages":i(T).errorMessage.value,label:"Valor de compra"},null,8,["modelValue","error-messages"]),[[_,"#####.##"]]),c(s(p,{class:"ml-5 mr-5 mt-5",modelValue:e.predios_equipamentos.data_operacao,"onUpdate:modelValue":r[6]||(r[6]=o=>e.predios_equipamentos.data_operacao=o),modelModifiers:{number:!0},"error-messages":i(M).errorMessage.value,label:"Inicio Operação"},null,8,["modelValue","error-messages"]),[[_,"####"]])]),_:1}),s(b,{"no-gutters":""},{default:t(()=>[s(p,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.patrimonio,"onUpdate:modelValue":r[7]||(r[7]=o=>e.predios_equipamentos.patrimonio=o),"error-messages":i(u).errorMessage.value,label:"Numero Patrimonio"},null,8,["modelValue","error-messages"]),c(s(p,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.numero_serie,"onUpdate:modelValue":r[8]||(r[8]=o=>e.predios_equipamentos.numero_serie=o),modelModifiers:{number:!0},"error-messages":i(k).errorMessage.value,label:"Numero Serie"},null,8,["modelValue","error-messages"]),[[_,"#####"]]),c(s(p,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.ano_fabricacao,"onUpdate:modelValue":r[9]||(r[9]=o=>e.predios_equipamentos.ano_fabricacao=o),modelModifiers:{number:!0},"error-messages":i(m).errorMessage.value,label:"Ano de Fabricação"},null,8,["modelValue","error-messages"]),[[_,"####"]])]),_:1}),s(b,{"no-gutters":""},{default:t(()=>[c(s(p,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.potencia,"onUpdate:modelValue":r[10]||(r[10]=o=>e.predios_equipamentos.potencia=o),modelModifiers:{number:!0},"error-messages":i(U).errorMessage.value,label:"Potência"},null,8,["modelValue","error-messages"]),[[_,"###.##"]]),s(V,{class:"ml-5 mr-5 mb-5",modelValue:e.predios_equipamentos.user_gestor,"onUpdate:modelValue":r[11]||(r[11]=o=>e.predios_equipamentos.user_gestor=o),items:e.users,label:"Selecione um Gestor","item-title":"nome","item-value":"id","error-messages":i(A).errorMessage.value,style:{"max-width":"500px"}},null,8,["modelValue","items","error-messages"])]),_:1}),s(q,{class:"ml-5 me-4 mt-4",color:"red",onClick:e.returnToTableTools},{default:t(()=>[g(" Voltar ")]),_:1},8,["onClick"]),s($,{"max-width":"500"},{activator:t(({props:o})=>[s(q,R({class:"me-4 mt-4"},o,{color:"green",onClick:e.submit}),{default:t(()=>[g(" Salvar ")]),_:2},1040,["onClick"])]),default:t(({isActive:o})=>[e.showError?(h(),v(O,{key:0},{default:t(()=>[s(H,null,{default:t(()=>[g(" Faltou preencher os campos obrigatorios ")]),_:1}),s(G,null,{default:t(()=>[s(F),s(q,{style:{"background-color":"#1b5175",color:"white"},onClick:X=>o.value=!1},{default:t(()=>[g("OK")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):w("",!0)]),_:1})]),_:1})],64)}}}),W=L(Q,[["__scopeId","data-v-beb67196"]]),de={__name:"RegisterTableTools",setup(d){return(n,a)=>(h(),v(W))}};export{de as default};
