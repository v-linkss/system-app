import{u as d}from"./vee-validate.esm-9e73a9b7.js";import{A as U}from"./AppBar-f0429b7c.js";import{_ as T,o as h,f as I,c as e,w as a,i as c,a2 as p,a1 as b,j as _,l as m,k as M,d as v,n as N,F as S,e as g,q as P,s as R,h as w}from"./index-88a5129e.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{V as A}from"./VRow-0c716acb.js";import{V}from"./VAutocomplete-6839ad36.js";import{V as E}from"./VDialog-b3b4de36.js";import{V as D,c as y,d as L}from"./VCard-2409a6d1.js";import{V as $}from"./VSpacer-49a1f52c.js";import{V as B}from"./VContainer-2697f82e.js";import"./layout-44c14d18.js";const O=s=>(P("data-v-b733bf9d"),s=s(),R(),s),H=O(()=>w("h1",{class:"ml-5 mt-5 mb-5",style:{color:"#777777"}},"Ambientes",-1)),F={data(){return{userData:{},predios:{descricao:void 0,numero_ocupantes:void 0,area:void 0,tabvalores_tipo_ambiente_id:void 0,predio_area_id:void 0},showError:!1,tipos:[],areas:[]}},methods:{returnToMainPage(){this.$router.push("/predios-ambientes/index")},async loadTipos(){const s={Authorization:`Bearer ${this.userData.token}`};try{console.log(`###################
`,this.userData.token);const n=(await g.get("http://localhost:3333/service/gerencia/listaTiposAmbientes",{headers:s})).data[0].func_json_tiposambientes;this.tipos=n}catch(l){console.error("Erro ao carregar tipos:",l)}},async loadAreas(){console.log(`loadAreas##################
`,this.userData.token);const s={Authorization:`Bearer ${this.userData.token}`},n={predio_token:JSON.parse(localStorage.getItem("predio")).predio_token};try{const t=await g.post("http://localhost:3333/service/gerencia/listaAreasAmbientes",n,{headers:s});console.log(`##################
`,t);const u=t.data[0].func_json_areas;this.areas=u,console.log(this.areas)}catch(t){console.error("Erro ao carregar áreas:",t)}},async submit(){this.predios.predio_area_id===void 0&&(this.predios.predio_area_id=null,console.log(this.predios.predio_area_id)),this.predios.numero_ocupantes===void 0&&(this.predios.numero_ocupantes=null,console.log(this.predios.numero_ocupantes));const s=JSON.parse(localStorage.getItem("predio")),l=JSON.parse(localStorage.getItem("user")),n={descricao:this.predios.descricao,numero_ocupantes:this.predios.numero_ocupantes,area:this.predios.area,tabvalores_tipo_ambiente_id:this.predios.tabvalores_tipo_ambiente_id,predio_area_id:this.predios.predio_area_id,predio_id:s.predio_id,user_created:l.id};try{const t=await g.post("http://localhost:3333/PrediosAmbienteCadastro",n);return this.$router.push("/predios-ambientes/index"),t}catch(t){console.error("Erro na criação do registro:",t),this.showError=!0}}},mounted(){this.userData=JSON.parse(localStorage.getItem("user")),this.loadAreas(),this.loadTipos()}},j=Object.assign(F,{__name:"RegisterAmbientes",setup(s){const l=d("descricao"),n=d("numero_ocupantes"),t=d("area"),u=d("tabvalores_tipo_ambiente_id"),k=d("predio_area_id");return(o,i)=>{const f=T("mask");return h(),I(S,null,[e(U),e(B,null,{default:a(()=>[H,e(c,{class:"ml-5 mr-5",modelValue:o.predios.descricao,"onUpdate:modelValue":i[0]||(i[0]=r=>o.predios.descricao=r),"error-messages":p(l).errorMessage.value,label:"Descrição(*)",autofocus:""},null,8,["modelValue","error-messages"]),e(A,{"no-gutters":""},{default:a(()=>[e(V,{class:"ml-5 align-end",modelValue:o.predios.tabvalores_tipo_ambiente_id,"onUpdate:modelValue":i[1]||(i[1]=r=>o.predios.tabvalores_tipo_ambiente_id=r),items:o.tipos,"item-title":"descricao","item-value":"id","error-messages":p(u).errorMessage.value,label:"Selecione um Tipo",clearable:""},null,8,["modelValue","items","error-messages"]),e(V,{class:"ml-5 mr-5",modelValue:o.predios.predio_area_id,"onUpdate:modelValue":i[2]||(i[2]=r=>o.predios.predio_area_id=r),items:o.areas,label:"Selecione uma Área","item-title":"descricao","item-value":"id","error-messages":p(k).errorMessage.value},null,8,["modelValue","items","error-messages"])]),_:1}),e(A,{class:"mt-5","no-gutters":""},{default:a(()=>[b(e(c,{class:"ml-5",modelValue:o.predios.numero_ocupantes,"onUpdate:modelValue":i[3]||(i[3]=r=>o.predios.numero_ocupantes=r),modelModifiers:{number:!0},"error-messages":p(n).errorMessage.value,label:"Numero Ocupantes"},null,8,["modelValue","error-messages"]),[[f,"###"]]),b(e(c,{class:"ml-5 mr-5",modelValue:o.predios.area,"onUpdate:modelValue":i[4]||(i[4]=r=>o.predios.area=r),modelModifiers:{number:!0},"error-messages":p(t).errorMessage.value,label:"Área(m2)"},null,8,["modelValue","error-messages"]),[[f,"###.##"]])]),_:1}),e(_,{class:"ml-5 me-4 mt-8",color:"red",onClick:o.returnToMainPage},{default:a(()=>[m(" Voltar ")]),_:1},8,["onClick"]),e(E,{"max-width":"500"},{activator:a(({props:r})=>[e(_,M({class:"me-4 mt-8"},r,{color:"green",onClick:o.submit}),{default:a(()=>[m(" Salvar ")]),_:2},1040,["onClick"])]),default:a(({isActive:r})=>[o.showError?(h(),v(D,{key:0},{default:a(()=>[e(y,null,{default:a(()=>[m(" Faltou preencher os campos obrigatorios ")]),_:1}),e(L,null,{default:a(()=>[e($),e(_,{style:{"background-color":"#1b5175",color:"white"},onClick:G=>r.value=!1},{default:a(()=>[m("OK")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):N("",!0)]),_:1})]),_:1})],64)}}}),J=C(j,[["__scopeId","data-v-b733bf9d"]]),re={__name:"AmbientesRegister",setup(s){return(l,n)=>(h(),v(J))}};export{re as default};
