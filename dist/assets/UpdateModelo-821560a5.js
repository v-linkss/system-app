import{u as m}from"./vee-validate.esm-472c5a5d.js";import{A as M}from"./AppBar-caeecede.js";import{_ as U,o as h,f as q,c as o,w as l,i as n,a2 as d,a1 as k,j as _,l as c,k as E,d as v,n as T,F as I,e as g,q as C,s as y,h as P}from"./index-bf573807.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import{V as f}from"./VRow-835fc559.js";import{V as $}from"./VAutocomplete-22e1fd5b.js";import{V as D}from"./VCheckbox-0df5a6d0.js";import{V as N}from"./VDialog-7687c8ff.js";import{V as B,c as R,d as L}from"./VCard-8ca74176.js";import{V as S}from"./VSpacer-441d260f.js";import{V as F}from"./VContainer-bdb2f7f7.js";import"./layout-c76e1f01.js";const H=t=>(C("data-v-739f4a0c"),t=t(),y(),t),O=H(()=>P("h1",{class:"ml-5 mt-5 mb-5",style:{color:"#777777"}},"Equipamentos Modelo",-1)),z={data(){return{userData:{},modelos:{descricao:void 0,codigo:void 0,entra_pmoc:void 0,fabricante:void 0,equipamento_tipo_id:void 0,vida_util:void 0},showError:!1,tipos:[]}},methods:{returnToMainPage(){this.$router.push("/equipamentos-modelos/index")},async loadTipos(){const r={token_predio:JSON.parse(localStorage.getItem("predio")).predio_token};try{const i={Authorization:`Bearer ${this.userData.token}`},p=(await g.post("http://45.55.192.246:3333/service/gerencia/listaTiposEquipamentos",r,{headers:i})).data[0].func_json_tiposequipamentos;this.tipos=p}catch(i){console.error("Erro ao carregar tipos:",i)}},async loadPredioModelosDetails(){try{const t={Authorization:`Bearer ${this.userData.token}`},r=await g.get(`http://45.55.192.246:3333/service/gerencia/getModeloEquipamentosById/${this.modelos.id}`,{headers:t});this.modelos.descricao=r.data.descricao,this.modelos.codigo=r.data.codigo,this.modelos.equipamento_tipo_id=r.data.equipamento_tipo_id,this.modelos.entra_pmoc=r.data.entra_pmoc,this.modelos.fabricante=r.data.fabricante,this.modelos.vida_util=r.data.vida_util}catch(t){console.error("Erro ao carregar detalhes do prédio_equipamentos:",t)}},async submit(){this.modelos.equipamento_tipo_id===void 0&&(this.modelos.equipamento_tipo_id=null);const t=!!this.modelos.entra_pmoc,r={descricao:this.modelos.descricao,vida_util:this.modelos.vida_util,codigo:this.modelos.codigo,fabricante:this.modelos.fabricante,equipamento_tipo_id:this.modelos.equipamento_tipo_id,entra_pmoc:t};try{const i={Authorization:`Bearer ${this.userData.token}`},u=await g.put(`http://45.55.192.246:3333/service/gerencia/updateModeloEquipamentos/${this.modelos.id}`,r,{headers:i});return this.$router.push("/equipamentos-modelos/index"),u}catch(i){console.error("Erro na criação do registro:",i),this.showError=!0}}},created(){this.$route.query.id?this.modelos.id=this.$route.query.id:console.log("Erro em carregar dados")},mounted(){this.userData=JSON.parse(localStorage.getItem("user")),this.loadPredioModelosDetails(),this.loadTipos()}},j=Object.assign(z,{__name:"UpdateEquipamentoModelo",setup(t){const r=m("descricao"),i=m("equipamento_tipo_id"),u=m("vida_util"),p=m("codigo"),V=m("fabricante"),b=m("entra_pmoc");return(e,s)=>{const A=U("mask");return h(),q(I,null,[o(M),o(F,null,{default:l(()=>[O,o(f,{"no-gutters":""},{default:l(()=>[o(n,{class:"ml-5 mr-5",modelValue:e.modelos.fabricante,"onUpdate:modelValue":s[0]||(s[0]=a=>e.modelos.fabricante=a),"error-messages":d(V).errorMessage.value,label:"Fabricante",dense:"",autofocus:""},null,8,["modelValue","error-messages"]),o(n,{class:"ml-5 mr-5",modelValue:e.modelos.codigo,"onUpdate:modelValue":s[1]||(s[1]=a=>e.modelos.codigo=a),"error-messages":d(p).errorMessage.value,label:"Codigo"},null,8,["modelValue","error-messages"])]),_:1}),o(f,{"no-gutters":""},{default:l(()=>[o($,{class:"ml-5 mr-5 mb-5",modelValue:e.modelos.equipamento_tipo_id,"onUpdate:modelValue":s[2]||(s[2]=a=>e.modelos.equipamento_tipo_id=a),items:e.tipos,"item-title":"descricao","item-value":"id","error-messages":d(i).errorMessage.value,label:"Selecione um Tipo(*)",style:{"max-width":"400px"},dense:"",clearable:""},null,8,["modelValue","items","error-messages"]),o(n,{class:"ml-5 mr-5",modelValue:e.modelos.fabricante,"onUpdate:modelValue":s[3]||(s[3]=a=>e.modelos.fabricante=a),"error-messages":d(V).errorMessage.value,label:"Fabricante",dense:""},null,8,["modelValue","error-messages"])]),_:1}),o(n,{class:"ml-5 mr-5",modelValue:e.modelos.descricao,"onUpdate:modelValue":s[4]||(s[4]=a=>e.modelos.descricao=a),"error-messages":d(r).errorMessage.value,label:"Descrição"},null,8,["modelValue","error-messages"]),o(f,{"no-gutters":""},{default:l(()=>[o(n,{class:"ml-5 mr-5",modelValue:e.modelos.codigo,"onUpdate:modelValue":s[5]||(s[5]=a=>e.modelos.codigo=a),"error-messages":d(p).errorMessage.value,label:"Codigo"},null,8,["modelValue","error-messages"]),k(o(n,{class:"ml-5 mr-5",modelValue:e.modelos.vida_util,"onUpdate:modelValue":s[6]||(s[6]=a=>e.modelos.vida_util=a),modelModifiers:{number:!0},"error-messages":d(u).errorMessage.value,label:"Vida Util(Meses)(*)"},null,8,["modelValue","error-messages"]),[[A,"##"]])]),_:1}),o(D,{class:"ml-5 mr-5",modelValue:e.modelos.entra_pmoc,"onUpdate:modelValue":s[7]||(s[7]=a=>e.modelos.entra_pmoc=a),"error-messages":d(b).errorMessage.value,label:"Incluir no PMOC"},null,8,["modelValue","error-messages"]),o(_,{class:"me-4 mt-8",color:"red",onClick:e.returnToMainPage},{default:l(()=>[c(" Voltar ")]),_:1},8,["onClick"]),o(N,{"max-width":"500"},{activator:l(({props:a})=>[o(_,E({class:"me-4 mt-8"},a,{color:"green",onClick:e.submit}),{default:l(()=>[c(" Atualizar ")]),_:2},1040,["onClick"])]),default:l(({isActive:a})=>[e.showError?(h(),v(B,{key:0},{default:l(()=>[o(R,null,{default:l(()=>[c(" Ocorreu erro ao atualizar o campo. ")]),_:1}),o(L,null,{default:l(()=>[o(S),o(_,{style:{"background-color":"#1b5175",color:"white"},onClick:J=>a.value=!1},{default:l(()=>[c("OK")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):T("",!0)]),_:1})]),_:1})],64)}}}),G=w(j,[["__scopeId","data-v-739f4a0c"]]),te={__name:"UpdateModelo",setup(t){return(r,i)=>(h(),v(G))}};export{te as default};
