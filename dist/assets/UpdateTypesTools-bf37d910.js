import{A as V}from"./AppBar-f0429b7c.js";import{u as n}from"./vee-validate.esm-9e73a9b7.js";import{o as h,f as b,c as s,w as t,i as u,a2 as d,j as _,l as p,k as U,d as A,n as v,F as I,e as m,q as k,s as E,h as y}from"./index-88a5129e.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import{V as T}from"./VRow-0c716acb.js";import{V as f}from"./VAutocomplete-6839ad36.js";import{V as S}from"./VDialog-b3b4de36.js";import{V as $,c as M,d as N}from"./VCard-2409a6d1.js";import{V as w}from"./VSpacer-49a1f52c.js";import{V as R}from"./VContainer-2697f82e.js";import"./layout-44c14d18.js";const C=e=>(k("data-v-96226e2c"),e=e(),E(),e),L=C(()=>y("h1",{class:"ml-5 mt-5 mb-5",style:{color:"#777777"}},"Tipos Equipamentos",-1)),q={data(){return{userData:{},prediosTipos:{descricao:void 0,sistema_id:void 0,tabvalores_segmento_id:void 0,icone_ok:void 0,icone_problema:void 0},showError:!1,segmentos:[],sistemas:[]}},methods:{returnToMainPage(){this.$router.push("/equipamentos-tipos/index")},async carregarSegmentos(){try{const e={Authorization:`Bearer ${this.userData.token}`},i=(await m.get("http://localhost:3333/service/gerencia/listaSegmentos",{headers:e})).data[0].func_json_segmentos;this.segmentos=i}catch(e){console.error("Erro na chamada de API:",e)}},async carregarSistemas(){try{const e={Authorization:`Bearer ${this.userData.token}`},i=(await m.get("http://localhost:3333/service/gerencia/listaSistemas",{headers:e})).data[0].func_json_sistemas;this.sistemas=i}catch(e){console.error("Erro na chamada de API:",e)}},async update(){this.prediosTipos.sistema_id===void 0&&(this.prediosTipos.sistema_id=null),this.prediosTipos.tabvalores_segmento_id===void 0&&(this.prediosTipos.tabvalores_segmento_id=null);const e=JSON.parse(localStorage.getItem("user")),a={descricao:this.prediosTipos.descricao,sistema_id:this.prediosTipos.sistema_id,icone_ok:this.prediosTipos.icone_ok,icone_problema:this.prediosTipos.icone_problema,tabvalores_segmento_id:this.prediosTipos.tabvalores_segmento_id,user_alteracao:e.id};try{const i={Authorization:`Bearer ${this.userData.token}`},c=await m.put(`http://localhost:3333/service/gerencia/updateEquipamentos/${this.prediosTipos.id}`,a,{headers:i});return this.$router.push("/equipamentos-tipos/index"),c}catch(i){console.error("Erro na criação do registro:",i),this.showError=!0}},async loadTiposEquipamentos(){try{const e={Authorization:`Bearer ${this.userData.token}`},a=await m.get(`http://localhost:3333/service/gerencia/getEquipamentosById/${this.prediosTipos.id}`,{headers:e});console.log(a.data),this.prediosTipos.descricao=a.data.descricao,this.prediosTipos.tabvalores_segmento_id=a.data.tabvalores_segmento_id,this.prediosTipos.sistema_id=a.data.sistema_id,this.prediosTipos.icone_ok=a.data.icone_ok,this.prediosTipos.icone_problema=a.data.icone_problema}catch(e){console.error("Erro ao carregar detalhes do prédio_equipamentos:",e)}}},created(){this.$route.query.id?this.prediosTipos.id=this.$route.query.id:console.log("Erro em carregar dados")},mounted(){this.userData=JSON.parse(localStorage.getItem("user")),this.loadTiposEquipamentos(),this.carregarSegmentos(),this.carregarSistemas()}},B=Object.assign(q,{__name:"UpdateTypesTools",setup(e){const a=n("descricao"),i=n("sistema_id"),c=n("tabvalores_segmento_id"),g=n("icone");return(o,l)=>(h(),b(I,null,[s(V),s(R,null,{default:t(()=>[L,s(u,{class:"ml-5 mr-5",modelValue:o.prediosTipos.descricao,"onUpdate:modelValue":l[0]||(l[0]=r=>o.prediosTipos.descricao=r),"error-messages":d(a).errorMessage.value,label:"Descrição(*)",autofocus:""},null,8,["modelValue","error-messages"]),s(T,{"no-gutters":""},{default:t(()=>[s(f,{class:"ml-5",modelValue:o.prediosTipos.sistema_id,"onUpdate:modelValue":l[1]||(l[1]=r=>o.prediosTipos.sistema_id=r),items:o.sistemas,"item-title":"descricao","item-value":"id","error-messages":d(i).errorMessage.value,label:"Selecione um Sistema(*)",clearable:""},null,8,["modelValue","items","error-messages"]),s(f,{class:"ml-5 mr-5",modelValue:o.prediosTipos.tabvalores_segmento_id,"onUpdate:modelValue":l[2]||(l[2]=r=>o.prediosTipos.tabvalores_segmento_id=r),items:o.segmentos,label:"Selecione um segmento","item-title":"descricao","item-value":"id","error-messages":d(c).errorMessage.value,clearable:""},null,8,["modelValue","items","error-messages"])]),_:1}),s(T,{"no-gutters":""},{default:t(()=>[s(u,{class:"ml-5 mr-5 mt-5",modelValue:o.prediosTipos.icone_ok,"onUpdate:modelValue":l[3]||(l[3]=r=>o.prediosTipos.icone_ok=r),"error-messages":d(g).errorMessage.value,label:"Icone OK"},null,8,["modelValue","error-messages"]),s(u,{class:"ml-5 mr-5 mt-5",modelValue:o.prediosTipos.icone_problema,"onUpdate:modelValue":l[4]||(l[4]=r=>o.prediosTipos.icone_problema=r),"error-messages":d(g).errorMessage.value,label:"Icone Problema"},null,8,["modelValue","error-messages"])]),_:1}),s(_,{class:"ml-5 me-4 mt-8",color:"red",onClick:o.returnToMainPage},{default:t(()=>[p(" Voltar")]),_:1},8,["onClick"]),s(S,{"max-width":"500"},{activator:t(({props:r})=>[s(_,U({class:"me-4 mt-8"},r,{color:"green",onClick:o.update}),{default:t(()=>[p(" Atualizar ")]),_:2},1040,["onClick"])]),default:t(({isActive:r})=>[o.showError?(h(),A($,{key:0},{default:t(()=>[s(M,null,{default:t(()=>[p(" Ocorreu erro ao atualizar o campo. ")]),_:1}),s(N,null,{default:t(()=>[s(w),s(_,{style:{"background-color":"#1b5175",color:"white"},onClick:H=>r.value=!1},{default:t(()=>[p("OK")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):v("",!0)]),_:1})]),_:1})],64))}}),D=P(B,[["__scopeId","data-v-96226e2c"]]),Z={__name:"UpdateTypesTools",setup(e){return(a,i)=>(h(),A(D))}};export{Z as default};
