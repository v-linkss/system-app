import{A as I}from"./AppBar-f0429b7c.js";import{u as d}from"./vee-validate.esm-9e73a9b7.js";import{_ as N,o as V,f as $,c as r,w as t,i as m,a2 as n,a1 as c,j as f,l as h,k as y,d as A,n as R,F as w,h as L,e as g}from"./index-88a5129e.js";import{V as q}from"./VRow-0c716acb.js";import{V as b}from"./VAutocomplete-6839ad36.js";import{V as D}from"./VDialog-b3b4de36.js";import{V as C,c as S,d as B}from"./VCard-2409a6d1.js";import{V as H}from"./VSpacer-49a1f52c.js";import{V as O}from"./VContainer-2697f82e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./layout-44c14d18.js";const z=L("h1",{class:"mt-5 mb-5",style:{color:"#777777"}},"Predios Equipamentos",-1),G={data(){return{predios_equipamentos:{descricao:void 0,codigo:void 0,ano_fabricacao:void 0,patrimonio:void 0,potencia:void 0,vlr_compra:void 0,numero_serie:void 0,data_operacao:void 0,predio_ambiente_id:void 0,modelo_id:void 0,user_gestor:void 0},ambientes:[],modelos:[],users:[],showError:!1}},methods:{returnToTableTools(){this.$router.push("/predios-equipamentos/index")},async loadAmbientes(){const s={predio_token:JSON.parse(localStorage.getItem("predio")).predio_token};try{const i={Authorization:`Bearer ${this.userData.token}`},u=await g.post("http://localhost:3333/service/gerencia/listaAmbientes",s,{headers:i}),p=u.data[0].func_json_ambientes;this.ambientes=p,console.log(u)}catch(i){console.error("Erro ao carregar tipos:",i)}},async loadModelos(){const s={token_predio:JSON.parse(localStorage.getItem("predio")).predio_token};try{const i={Authorization:`Bearer ${this.userData.token}`},p=(await g.post("http://localhost:3333/service/gerencia/listaModeloEquipamentos",s,{headers:i})).data[0].func_json_modelos_equipamentos;this.modelos=p}catch(i){console.error("Erro ao carregar áreas:",i)}},async loadUsers(){const s={predio_token:JSON.parse(localStorage.getItem("predio")).predio_token};try{const i={Authorization:`Bearer ${this.userData.token}`},p=(await g.post("http://localhost:3333/service/gerencia/PrediosEquipamentosGestores",s,{headers:i})).data[0].func_json_gestores;this.users=p}catch(i){console.error("Erro ao carregar áreas:",i)}},async updatePrediosEquipamento(){this.predios_equipamentos.modelo_id===void 0&&(this.predios_equipamentos.modelo_id=null),this.predios_equipamentos.predio_ambiente_id===void 0&&(this.predios_equipamentos.predio_ambiente_id=null),this.predios_equipamentos.user_gestor===void 0&&(this.predios_equipamentos.user_gestor=null);const l={descricao:this.predios_equipamentos.descricao,codigo:this.predios_equipamentos.codigo,ano_fabricacao:this.predios_equipamentos.ano_fabricacao,patrimonio:this.predios_equipamentos.patrimonio,potencia:this.predios_equipamentos.potencia,vlr_compra:this.predios_equipamentos.vlr_compra,numero_serie:this.predios_equipamentos.numero_serie,data_operacao:this.predios_equipamentos.data_operacao,modelo_id:this.predios_equipamentos.modelo_id,predio_ambiente_id:this.predios_equipamentos.predio_ambiente_id,user_gestor:this.predios_equipamentos.user_gestor};try{const s=await g.put(`http://localhost:3333/service/gerencia/PrediosEquipamentosAtualizar/${this.predios_equipamentos.id}`,l,{headers});return this.$router.push("/predios-equipamentos/index"),s}catch(s){console.error("Erro na criação do registro:",s),this.showError=!0}},async loadPredioEquipamentosDetails(){try{const l={Authorization:`Bearer ${this.userData.token}`},s=await g.get(`http://localhost:3333/service/gerencia/getPrediosEquipamentos/${this.predios_equipamentos.id}`,{headers:l});this.predios_equipamentos.descricao=s.data.descricao,this.predios_equipamentos.codigo=s.data.codigo,this.predios_equipamentos.ano_fabricacao=s.data.ano_fabricacao,this.predios_equipamentos.modelo_id=s.data.modelo_id,this.predios_equipamentos.numero_serie=s.data.numero_serie,this.predios_equipamentos.potencia=s.data.potencia,this.predios_equipamentos.vlr_compra=s.data.vlr_compra,this.predios_equipamentos.predio_ambiente_id=s.data.predio_ambiente_id,this.predios_equipamentos.user_gestor=s.data.user_gestor,this.predios_equipamentos.data_operacao=s.data.data_operacao,this.predios_equipamentos.patrimonio=s.data.patrimonio}catch(l){console.error("Erro ao carregar detalhes do prédio_equipamentos:",l)}}},created(){this.$route.query.id?this.predios_equipamentos.id=this.$route.query.id:console.log("Erro em carregar dados")},mounted(){this.userData=JSON.parse(localStorage.getItem("user")),this.loadModelos(),this.loadAmbientes(),this.loadUsers(),this.loadPredioEquipamentosDetails()}},j=Object.assign(G,{__name:"UpdateBuildTools",setup(l){const s=d("descricao"),i=d("codigo"),u=d("ano_fabricacao"),p=d("patrimonio"),U=d("potencia"),v=d("vlr_compra"),T=d("numero_serie"),k=d("data_operacao"),M=d("modelo_id"),E=d("predio_ambiente_id"),P=d("user_gestor");return(e,a)=>{const _=N("mask");return V(),$(w,null,[r(I),r(O,null,{default:t(()=>[z,r(m,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.descricao,"onUpdate:modelValue":a[0]||(a[0]=o=>e.predios_equipamentos.descricao=o),"error-messages":n(s).errorMessage.value,label:"Descrição(*)",autofocus:""},null,8,["modelValue","error-messages"]),r(q,{"no-gutters":""},{default:t(()=>[r(b,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.modelo_id,"onUpdate:modelValue":a[1]||(a[1]=o=>e.predios_equipamentos.modelo_id=o),items:e.modelos,"item-title":"descricao","item-value":"id","error-messages":n(M).errorMessage.value,label:"Selecione um Modelo(*)",clearable:""},null,8,["modelValue","items","error-messages"]),r(b,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.predio_ambiente_id,"onUpdate:modelValue":a[2]||(a[2]=o=>e.predios_equipamentos.predio_ambiente_id=o),items:e.ambientes,"item-title":"descricao","item-value":"id","error-messages":n(E).errorMessage.value,label:"Selecione um Ambiente(*)",style:{"max-width":"600px"},clearable:""},null,8,["modelValue","items","error-messages"]),r(b,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.user_gestor,"onUpdate:modelValue":a[3]||(a[3]=o=>e.predios_equipamentos.user_gestor=o),items:e.users,label:"Selecione um Gestor","item-title":"nome","item-value":"id","error-messages":n(P).errorMessage.value,clearable:""},null,8,["modelValue","items","error-messages"])]),_:1}),r(q,{"no-gutters":""},{default:t(()=>[r(m,{class:"ml-5 mr-5 mt-5",modelValue:e.predios_equipamentos.codigo,"onUpdate:modelValue":a[4]||(a[4]=o=>e.predios_equipamentos.codigo=o),"error-messages":n(i).errorMessage.value,label:"Codigo"},null,8,["modelValue","error-messages"]),c(r(m,{class:"ml-5 mr-5 mt-5",modelValue:e.predios_equipamentos.vlr_compra,"onUpdate:modelValue":a[5]||(a[5]=o=>e.predios_equipamentos.vlr_compra=o),modelModifiers:{number:!0},"error-messages":n(v).errorMessage.value,label:"Valor de compra"},null,8,["modelValue","error-messages"]),[[_,"#####.##"]]),c(r(m,{class:"ml-5 mr-5 mt-5",modelValue:e.predios_equipamentos.data_operacao,"onUpdate:modelValue":a[6]||(a[6]=o=>e.predios_equipamentos.data_operacao=o),modelModifiers:{number:!0},"error-messages":n(k).errorMessage.value,label:"Inicio Operação"},null,8,["modelValue","error-messages"]),[[_,"####"]])]),_:1}),r(q,{"no-gutters":""},{default:t(()=>[r(m,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.patrimonio,"onUpdate:modelValue":a[7]||(a[7]=o=>e.predios_equipamentos.patrimonio=o),"error-messages":n(p).errorMessage.value,label:"Numero Patrimonio"},null,8,["modelValue","error-messages"]),c(r(m,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.numero_serie,"onUpdate:modelValue":a[8]||(a[8]=o=>e.predios_equipamentos.numero_serie=o),modelModifiers:{number:!0},"error-messages":n(T).errorMessage.value,label:"Numero Serie"},null,8,["modelValue","error-messages"]),[[_,"#####"]]),c(r(m,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.ano_fabricacao,"onUpdate:modelValue":a[9]||(a[9]=o=>e.predios_equipamentos.ano_fabricacao=o),modelModifiers:{number:!0},"error-messages":n(u).errorMessage.value,label:"Ano de Fabricação"},null,8,["modelValue","error-messages"]),[[_,"####"]])]),_:1}),r(q,{"no-gutters":""},{default:t(()=>[c(r(m,{class:"ml-5 mr-5",modelValue:e.predios_equipamentos.potencia,"onUpdate:modelValue":a[10]||(a[10]=o=>e.predios_equipamentos.potencia=o),modelModifiers:{number:!0},"error-messages":n(U).errorMessage.value,label:"Potência"},null,8,["modelValue","error-messages"]),[[_,"###.##"]])]),_:1}),r(f,{class:"me-4 mt-4",color:"red",onClick:e.returnToTableTools},{default:t(()=>[h(" Voltar ")]),_:1},8,["onClick"]),r(D,{"max-width":"500"},{activator:t(({props:o})=>[r(f,y({class:"me-4 mt-4"},o,{color:"green",onClick:e.updatePrediosEquipamento}),{default:t(()=>[h(" Atualizar ")]),_:2},1040,["onClick"])]),default:t(({isActive:o})=>[e.showError?(V(),A(C,{key:0},{default:t(()=>[r(S,null,{default:t(()=>[h(" Ocorreu erro ao atualizar o campo. ")]),_:1}),r(B,null,{default:t(()=>[r(H),r(f,{style:{"background-color":"#1b5175",color:"white"},onClick:F=>o.value=!1},{default:t(()=>[h("OK")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):R("",!0)]),_:1})]),_:1})],64)}}}),re={__name:"UpdateTableTools",setup(l){return(s,i)=>(V(),A(j))}};export{re as default};
