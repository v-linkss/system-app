import{o as m,d as g,w as l,f as w,F as k,v as L,c as a,i as c,h as _,q as I,s as S,e as v,r as q,bf as U,j as A,l as h,k as M,x,n as C,_ as j,a1 as E,$ as F,a0 as K,a2 as G,a3 as D}from"./index-88a5129e.js";import{_ as B,a as Q}from"./visualizar-491b4619.js";import{A as W}from"./AppBar-f0429b7c.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import{V as J}from"./VContainer-2697f82e.js";import{V as y,c as V,d as P}from"./VCard-2409a6d1.js";import{V as p}from"./VCol-888c2a5e.js";import{V as f}from"./VRow-0c716acb.js";import{V as b}from"./VSpacer-49a1f52c.js";import{V as O}from"./VDialog-b3b4de36.js";import{V as z}from"./VAutocomplete-6839ad36.js";import"./layout-44c14d18.js";const Y="data:image/png;base64,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";const X={props:{parcelas:{type:Array,required:!0}},computed:{formattedParcelas(){return this.parcelas.map(t=>({...t,valor:t.valor?parseFloat(t.valor).toFixed(2):"0.00",tx_multa:t.tx_multa?parseFloat(t.tx_multa).toFixed(2):"0.00",tx_juros:t.tx_juros?parseFloat(t.tx_juros).toFixed(2):"0.00",desconto_adimplencia:t.desconto_adimplencia?parseFloat(t.desconto_adimplencia).toFixed(2):"0.00"}))}},methods:{removeParcela(t){this.$emit("remove-parcela",t)},updateParcela(t,e,o){let n=o.target.value;e!=="dt_vencimento"&&(n=parseFloat(n.replace(",",".")).toFixed(2),isNaN(n)&&(n="0.00")),this.$emit("update-parcela",{index:t,field:e,value:n})}},watch:{parcelas:{deep:!0,handler(t){this.$emit("update:parcelas",t)}}}},H=t=>(I("data-v-942df0b1"),t=t(),S(),t),Z=["onClick"],$=H(()=>_("img",{style:{width:"40px",height:"40px"},src:Y,alt:"subtrair"},null,-1)),ee=[$];function te(t,e,o,n,s,r){return m(),g(f,{dense:""},{default:l(()=>[(m(!0),w(k,null,L(r.formattedParcelas,(d,u)=>(m(),g(J,{key:u},{default:l(()=>[a(y,null,{default:l(()=>[a(p,null,{default:l(()=>[a(V,null,{default:l(()=>[a(f,{dense:""},{default:l(()=>[a(c,{modelValue:d.documento,"onUpdate:modelValue":i=>d.documento=i,"model-value":d.documento,label:"Número ",class:"ml-4",onInput:i=>r.updateParcela(u,"documento",i)},null,8,["modelValue","onUpdate:modelValue","model-value","onInput"]),a(c,{type:"date",modelValue:d.dt_vencimento,"onUpdate:modelValue":i=>d.dt_vencimento=i,label:"Vencimento",class:"ml-4",style:{width:"120px"},onInput:i=>r.updateParcela(u,"dt_vencimento",i)},null,8,["modelValue","onUpdate:modelValue","onInput"]),a(c,{modelValue:d.valor,"onUpdate:modelValue":i=>d.valor=i,modelModifiers:{number:!0},label:"Valor ",class:"ml-4",style:{width:"150px"},onInput:i=>r.updateParcela(u,"valor",i)},null,8,["modelValue","onUpdate:modelValue","onInput"]),a(c,{modelValue:d.tx_multa,"onUpdate:modelValue":i=>d.tx_multa=i,modelModifiers:{number:!0},label:"% Multa",class:"ml-4",style:{width:"90px"},onInput:i=>r.updateParcela(u,"tx_multa",i)},null,8,["modelValue","onUpdate:modelValue","onInput"]),a(c,{modelValue:d.tx_juros,"onUpdate:modelValue":i=>d.tx_juros=i,modelModifiers:{number:!0},label:"% Juros",class:"ml-4",style:{width:"85px"},onInput:i=>r.updateParcela(u,"tx_juros",i)},null,8,["modelValue","onUpdate:modelValue","onInput"]),a(c,{modelValue:d.desconto_adimplencia,"onUpdate:modelValue":i=>d.desconto_adimplencia=i,modelModifiers:{number:!0},label:"Desc. Adimplência",class:"ml-4",style:{width:"180px"},onInput:i=>r.updateParcela(u,"desconto_adimplencia",i)},null,8,["modelValue","onUpdate:modelValue","onInput"]),a(p,{cols:"10"},{default:l(()=>[a(c,{modelValue:d.observacao,"onUpdate:modelValue":i=>d.observacao=i,type:"text",label:"Observação",class:"ml-3",onInput:i=>r.updateParcela(u,"observacao",i)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:2},1024),_("div",{class:"btn-pointer ml-4",onClick:i=>r.removeParcela(u)},ee,8,Z)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}const ae=N(X,[["render",te],["__scopeId","data-v-942df0b1"]]);const oe={data(){return{userData:{},valorNegociado:null,documento:null,dt_vencimento:null,localShow:this.show,parcelasList:JSON.parse(JSON.stringify(this.parcelasDetalhadas)),taxasList:JSON.parse(JSON.stringify(this.taxas)),showError:!1,showBoleto:!1,boletos:[]}},components:{ParcelasGeradas:ae},props:{show:{Boolean,required:!0},parcelasDetalhadas:{type:Array,default:()=>[],required:!0},taxas:{type:Object,required:!0},selectedItem:{type:String,required:!1},valorNegociado:{type:Number,required:!1},valorTitulo:{type:Number,required:!1},titulos:{type:Array,default:()=>[],required:!0}},computed:{totalParcelas(){return this.parcelasList.length},valorTotalParcelas(){return this.parcelasList.reduce((t,e)=>t+e.valor,0),this.valorNegociado=this.parcelasList,this.parcelasList}},watch:{show(t){this.localShow=t},localShow(t){this.$emit("update:show",t)},parcelasDetalhadas(t){this.parcelasList=JSON.parse(JSON.stringify(t))},taxas(t){this.taxasList=JSON.parse(JSON.stringify(t))}},mounted(){this.userData=JSON.parse(localStorage.getItem("user"))},methods:{closeModal(){this.localShow=!1},updateParcelaData({index:t,field:e,value:o}){(e==="valor"||e==="tx_multa"||e==="tx_juros"||e==="desconto_adimplencia")&&(o=Number(o)),this.parcelasList[t][e]=o},addParcela(){if(this.parcelasList.length<12){const t={documento:"P-"+(this.parcelasList.length+1),valor:0,tx_multa:this.taxasList.tx_multa,tx_juros:this.taxasList.tx_juros_mes,desconto_adimplencia:this.taxasList.desconto_adimplencia};this.parcelasList.push(t)}},removeParcela(t){this.parcelasList.length>1&&this.parcelasList.splice(t,1)},maxParcelas(t){return t>=12?"O número máximo de parcelas é 12":!0},checkParcelas(){this.parcelasList>12&&(this.parcelasList=12)},async confirmBoletoView(){try{if(!this.boletos||!Array.isArray(this.boletos))throw new Error("Invalid boletos data");const t=JSON.stringify(this.boletos),e=encodeURIComponent(t);console.log("Encoded Data:",e);const o=`/boletos-negociacao?data=${e}`;window.open(o,"_blank")}catch(t){console.error("Error opening boleto negotiation view:",t.message)}},async submit(){const t=JSON.parse(localStorage.getItem("predio")),e=JSON.parse(localStorage.getItem("user")),o={titulos:this.titulos,params:[{predio_token:t.predio_token,user_token:e.token}],parcelas:this.parcelasList};if(this.valorTotalParcelas===this.valorNegociado)try{const n={Authorization:`Bearer ${this.userData.token}`},r=(await v.post("http://localhost:3333/service/gerencia/negociarTitulo",[o],{headers:n})).data[0].func_negociacao_titulos;return t.conta_bancaria_id?(this.showBoleto=!0,this.boletos=r,console.log(r)):this.localShow=!1,r}catch(n){console.error("Erro na criação do registro:",n)}}}},le=t=>(I("data-v-e594749f"),t=t(),S(),t),se=le(()=>_("img",{style:{width:"40px",height:"40px"},src:B,alt:"novo"},null,-1)),re=[se];function ie(t,e,o,n,s,r){const d=q("ParcelasGeradas");return m(),g(O,{modelValue:s.localShow,"onUpdate:modelValue":e[1]||(e[1]=u=>s.localShow=u),"max-width":"1200px",persistent:""},{default:l(()=>[a(y,{title:"Parcelas"},{default:l(()=>[a(V,{class:"parcelas-content"},{default:l(()=>[a(f,{dense:""},{default:l(()=>[a(c,{label:"Lote","model-value":o.selectedItem,readonly:"",class:"opacity-75 ml-4"},null,8,["model-value"]),a(c,{label:"Valor Títulos","model-value":o.valorTitulo,readonly:"",class:"opacity-75 ml-4"},null,8,["model-value"]),a(c,{label:"Valor Negociado","model-value":o.valorTitulo,readonly:"",class:"opacity-75 ml-4"},null,8,["model-value"]),a(c,{label:"Total Parcelas","model-value":r.totalParcelas,rules:[r.maxParcelas],onInput:r.checkParcelas,readonly:"",class:"opacity-75 ml-4"},null,8,["model-value","rules","onInput"]),_("div",{class:"btn-pointer ml-4",onClick:e[0]||(e[0]=(...u)=>r.addParcela&&r.addParcela(...u))},re)]),_:1})]),_:1}),a(U),a(d,{parcelas:s.parcelasList,onRemoveParcela:r.removeParcela,onUpdateParcela:r.updateParcelaData},null,8,["parcelas","onRemoveParcela","onUpdateParcela"]),a(U),a(P,null,{default:l(()=>[a(b),a(A,{style:{"background-color":"red",color:"white"},onClick:r.closeModal},{default:l(()=>[h(" Voltar")]),_:1},8,["onClick"]),a(O,{"max-width":"500"},{activator:l(({props:u})=>[a(A,M({class:"me-4"},u,{style:{"background-color":"green"},color:"white",onClick:r.submit}),{default:l(()=>[h(" Salvar ")]),_:2},1040,["onClick"])]),default:l(({isActive:u})=>[s.showError?(m(),g(y,{key:0},{default:l(()=>[a(V,null,{default:l(()=>[h(x(`O valor total das parcelas: ${r.totalParcelas} deve ser igual ao valor negociado R$ ${this.valorNegociado}`),1)]),_:1}),a(P,null,{default:l(()=>[a(b),a(A,{style:{"background-color":"#1b5175",color:"white"},onClick:i=>u.value=!1},{default:l(()=>[h("OK")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):C("",!0),s.showBoleto?(m(),g(y,{key:1},{default:l(()=>[a(V,null,{default:l(()=>[h(x("Deseja visualizar os boletos?"))]),_:1}),a(P,null,{default:l(()=>[a(b),a(A,{style:{"background-color":"red",color:"white",width:"80px",height:"40px"},onClick:i=>u.value=!1},{default:l(()=>[h("Não")]),_:2},1032,["onClick"]),a(A,{class:"me-4",style:{"background-color":"green",width:"80px",height:"40px"},color:"white",onClick:r.confirmBoletoView},{default:l(()=>[h(" Sim ")]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)):C("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}const R=N(oe,[["render",ie],["__scopeId","data-v-e594749f"]]);const T=t=>(I("data-v-6119c291"),t=t(),S(),t),ne=T(()=>_("h1",{class:"ml-15 mt-4 mb-10",style:{color:"#777777"}}," Negocicação de Títulos ",-1)),de=T(()=>_("img",{style:{width:"40px",height:"40px"},src:Q,alt:"Visualizar"},null,-1)),ue=T(()=>_("img",{style:{width:"40px",height:"40px"},src:B,alt:"novo"},null,-1)),ce={style:{"overflow-x":"auto"}},me={components:{ModalParcelas:R,VDataTable:D},data(){return{userData:{},filteredLotes:[],showModal:!1,selected:[],taxas:[],titulos_lote:[],selectedItem:null,selectedItemTitle:null,valorNegociado:null,parcelasDetalhadas:[],valorTitulos:null,parcelas:null,lotesCombo:[],searchQuery:"",itemsPerPage:[20],footerProps:[20],headers:[{title:"Título",value:"documento",search:"",width:"25%"},{title:"Vencimento",value:"dt_vencimento",search:"",width:"25%"},{title:"Valor",value:"valor",search:"",width:"25%"},{title:"Observação",value:"observacao",search:"",width:"25%"}]}},computed:{valorTotal(){return this.valorTitulos||0},selectedTokens(){return this.selected.map(t=>({token:this.titulos_lote.find(o=>o.predio_titulo_id===t).token}))}},methods:{returnToMainPage(){this.$router.push("/panel/index")},maxParcelas(t){return t>=12?"O número máximo de parcelas é 12":!0},checkParcelas(){this.parcelas>12&&(this.parcelas=12)},openModal(){this.calcularParcelas(),this.showModal=!0},async loadLotes(){const e={predio_token:JSON.parse(localStorage.getItem("predio")).predio_token};try{const o={Authorization:`Bearer ${this.userData.token}`},s=(await v.post("http://localhost:3333/service/gerencia/lotesPredios",e,{headers:o})).data[0].func_json_lotes_predio;this.lotesCombo=s,console.log(`############lotesCombo##########
`,this.lotesCombo)}catch(o){console.error("Erro ao carregar áreas:",o)}},saveSearchQuery(){localStorage.setItem("searchQuery",this.searchQuery);const t=localStorage.getItem("searchQuery");console.log("saveSearchQuery:",t)},async gerarReceitas(t){try{console.log("eeeeeeeeeeeeeeeeeeeeeeeeeh");const e={Authorization:`Bearer ${this.userData.token}`},o=JSON.parse(localStorage.getItem("predio")),s={lote_token:t,predio_token:o.predio_token},d=(await v.post("http://localhost:3333/service/gerencia/titulosLotes",s,{headers:e})).data[0].func_json_titulos_lote;this.titulos_lote=d,this.filteredLotes=this.titulos_lote,this.selectedItemTitle=this.titulos_lote[0].lote,console.log(`############titulos_lote##########
`,this.titulos_lote)}catch(e){console.error("Erro ao carregar titulos_lote:",e)}},sumCheckedValues(){const t=this.titulos_lote.filter(o=>this.selected.includes(o.predio_titulo_id));let e=0;t.forEach(o=>{e+=parseFloat(o.valor)}),this.valorTitulos=e,console.log(this.selected,t)},async calcularParcelas(){const t=JSON.parse(localStorage.getItem("predio"));try{const e={Authorization:`Bearer ${this.userData.token}`},n=(await v.get(`http://localhost:3333/service/gerencia/getTaxasById/${t.predio_id}`,{headers:e})).data;this.taxas=n;const s=(this.valorNegociado/this.parcelas).toFixed(2),r=(this.valorNegociado-s*(this.parcelas-1)).toFixed(2);this.parcelasDetalhadas=Array(this.parcelas).fill().map((d,u)=>({documento:"P-"+(u+1),valor:Number(u===0?r:s),tx_multa:Number(n.tx_multa),tx_juros:Number(n.tx_juros_mes),desconto_adimplencia:Number(n.desconto_adimplencia)}))}catch(e){console.error(e)}},filterTable(){this.filteredLotes=this.titulos_lote.filter(t=>this.headers.every(e=>{if(e.search.trim()==="")return!0;const o=String(t[e.value]).toLowerCase(),n=e.search.toLowerCase();return o.includes(n)}))},filterOnEnter(){this.filterTable()},filterOnBlur(){this.filterTable()}},mounted(){this.loadLotes(),this.userData=JSON.parse(localStorage.getItem("user"))}},pe=Object.assign(me,{__name:"NegociacaoTitulosHome",setup(t){return(e,o)=>{const n=j("mask");return m(),w(k,null,[a(W),a(J,null,{default:l(()=>[ne,a(f,{class:"mt-6","no-gutters":""},{default:l(()=>[a(p,{class:"ml-13"},{default:l(()=>[a(z,{modelValue:e.selectedItem,"onUpdate:modelValue":o[0]||(o[0]=s=>e.selectedItem=s),items:e.lotesCombo,label:"Selecione um lote","item-title":"nome","item-value":"token"},null,8,["modelValue","items"])]),_:1}),a(p,{class:"btn-pointer",onClick:o[1]||(o[1]=s=>e.gerarReceitas(e.selectedItem))},{default:l(()=>[de]),_:1}),a(p,{class:"ml-5"},{default:l(()=>[a(c,{type:"number",modelValue:e.valorTitulos,"onUpdate:modelValue":o[2]||(o[2]=s=>e.valorTitulos=s),label:"Valor Títulos",readonly:"",disabled:"",class:"opacity-75"},null,8,["modelValue"])]),_:1}),a(p,null,{default:l(()=>[E(a(c,{class:"ml-6",modelValue:e.valorNegociado,"onUpdate:modelValue":o[3]||(o[3]=s=>e.valorNegociado=s),modelModifiers:{number:!0},label:"Valor Negociado"},null,8,["modelValue"]),[[n,"######.##"]])]),_:1}),a(p,{class:"ml-5"},{default:l(()=>[a(c,{modelValue:e.parcelas,"onUpdate:modelValue":o[4]||(o[4]=s=>e.parcelas=s),modelModifiers:{number:!0},label:"Parcelas",rules:[e.maxParcelas],onInput:e.checkParcelas},null,8,["modelValue","rules","onInput"])]),_:1}),a(p,{class:"btn-pointer",onClick:e.openModal},{default:l(()=>[ue]),_:1},8,["onClick"])]),_:1}),a(f,{class:"ml-10 mr-10"},{default:l(()=>[(m(!0),w(k,null,L(e.headers,(s,r)=>(m(),g(p,{key:s.key},{default:l(()=>[r<e.headers.length?(m(),g(c,{key:0,modelValue:s.search,"onUpdate:modelValue":d=>s.search=d,label:s.title,"prepend-inner-icon":"mdi-magnify",outlined:"","hide-details":"","single-line":"",onKeydown:F(e.filterOnEnter,["enter"]),onBlur:e.filterOnBlur,ref_for:!0,ref:"searchFields",class:K("custom-text-field custom-text-field-"+r)},null,8,["modelValue","onUpdate:modelValue","label","onKeydown","onBlur","class"])):C("",!0)]),_:2},1024))),128))]),_:1}),_("div",ce,[a(G(D),{class:"mt-9",headers:e.headers,items:e.filteredLotes,modelValue:e.selected,"onUpdate:modelValue":o[5]||(o[5]=s=>e.selected=s),"item-value":"predio_titulo_id","rows-per-page-items":e.itemsPerPage,"footer-props":e.footerProps,"show-select":"",density:"default","item-selectable":"selectable",onChange:e.sumCheckedValues,fixed:""},null,8,["headers","items","modelValue","rows-per-page-items","footer-props","onChange"])]),a(A,{class:"mt-8",color:"red",onClick:e.returnToMainPage},{default:l(()=>[h(" Voltar")]),_:1},8,["onClick"]),a(R,{show:e.showModal,"onUpdate:show":o[6]||(o[6]=s=>e.showModal=s),"selected-item":e.selectedItemTitle,"valor-titulo":e.valorTitulos,"valor-negociado":e.valorNegociado,"parcelas-detalhadas":e.parcelasDetalhadas,titulos:e.selectedTokens,taxas:e.taxas},null,8,["show","selected-item","valor-titulo","valor-negociado","parcelas-detalhadas","titulos","taxas"])]),_:1})],64)}}}),he=N(pe,[["__scopeId","data-v-6119c291"]]),Ie={__name:"NegociacaoTitulos",setup(t){return(e,o)=>(m(),g(he))}};export{Ie as default};
